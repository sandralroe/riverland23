!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=16)}([,function(t,e){t.exports=Mura},,,,,,,,,,,,,,,function(t,e,n){var i,a={};(i=n(17)).keys().forEach((function(t){return a[t]=i(t)}))},function(t,e,n){var i={"./approvalchain.js":18,"./architecture.js":19,"./category.js":20,"./comment.js":21,"./core.js":22,"./dashboard.js":23,"./email.js":24,"./extend.js":25,"./feed.js":26,"./manageData.js":27,"./searchParams.js":28,"./user.js":29};function a(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=o,t.exports=a,a.id=17},function(t,e){chainManager={setGroupMembershipSort:function(){$("#groupAvailableListSort, #groupAssignmentListSort").sortable({connectWith:".groupDisplayListSortOptions",update:function(t,e){t.stopPropagation(),"groupAssignmentListSort"==e.item.parents("ol:first").attr("id")?e.item.find("input:first").attr("name","groupID"):e.item.find("input:first").attr("name","availableID")}}).disableSelection()}}},function(module,exports){function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",r=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,a){var o=e&&e.prototype instanceof m?e:m,r=Object.create(o.prototype),s=new j(a||[]);return i(r,"_invoke",{value:C(t,n,s)}),r}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function m(){}function f(){}function g(){}var p={};c(p,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=g.prototype=m.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){var a;i(this,"_invoke",{value:function(i,o){function r(){return new e((function(a,r){!function i(a,o,r,s){var c=d(t[a],t,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==_typeof(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){i("next",t,r,s)}),(function(t){i("throw",t,r,s)})):e.resolve(u).then((function(t){l.value=t,r(l)}),(function(t){return i("throw",t,r,s)}))}s(c.arg)}(i,o,a,r)}))}return a=a?a.then(r,r):r()}})}function C(t,e,n){var i="suspendedStart";return function(a,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw o;return A()}for(n.method=a,n.arg=o;;){var r=n.delegate;if(r){var s=w(r,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(t,e,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=d(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,u;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=g,i(y,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:f,configurable:!0}),f.displayName=c(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b($.prototype),c($.prototype,r,(function(){return this})),t.AsyncIterator=$,t.async=function(e,n,i,a,o){void 0===o&&(o=Promise);var r=new $(l(e,n,i,a),o);return t.isGeneratorFunction(n)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},b(y),c(y,s,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return r.type="throw",r.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],r=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function asyncGeneratorStep(t,e,n,i,a,o,r){try{var s=t[o](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,a)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function r(t){asyncGeneratorStep(o,i,a,r,s,"next",t)}function s(t){asyncGeneratorStep(o,i,a,r,s,"throw",t)}r(void 0)}))}}function initConfigurator(t,e){return siteManager.initConfigurator(t,e)}siteManager={formSubmitted:!1,layoutmanager:!1,fileLockConfirmed:!1,hasFileLock:!1,nodeLockConfirmed:!1,hasNodeLock:!1,dirtyRelatedContent:!1,currentModuleID:"",copyContentID:"",copyModuleID:"",copySiteID:"",reloadURL:"",tablist:"",submitDialogs:[],submitActions:[],assigningChangeset:!1,addSubmitDialog:function(t){siteManager.submitDialogs.push(t)},addSubmitAction:function(t){siteManager.submitActions.push(t)},submitContentForm:function(){var t=0,e=siteManager.submitDialogs,n=siteManager.submitActions;!function i(){if("undefined"!=typeof CKEDITOR)for(c in CKEDITOR.instances)CKEDITOR.instances[c].updateElement();for(Mura("textarea.mura-markdown,textarea.markdownEditor").forEach((function(){var t=Mura(this);markdownInstances&&void 0!==markdownInstances[t.attr("name")]&&t.length&&(t.hasClass("markdown-lazy-init")||t.val(markdownInstances[t.attr("name")].getMarkdown()))})),c=0;c<e.length;c++)if(c==t){var a=e[c];if("confirmation"==a.type.toLowerCase()){if("function"!=typeof a.condition)return confirmDialog($.extend(a,{yesAction:function(){t++,i()}})),!1;var o=function(){t++,i()},r=null;if("function"==typeof a.yesFn&&(o=function(){a.yesFn()&&(t++,i())}),"function"==typeof a.noFn&&(r=function(){a.noFn()&&(t++,i())}),"function"!=typeof a.condition)return confirmDialog($.extend(a,{yesAction:o,noAction:r})),!1;if(a.condition(a))return confirmDialog($.extend(a,{yesAction:o,noAction:r})),!1;t++}else if("alert"==a.type.toLowerCase()){var s=function(){t++,i()};if("function"==typeof a.okFn&&(s=function(){a.okFn()&&(t++,i())}),"function"!=typeof a.condition)return alertDialog($.extend(a,{okAction:s})),!1;if(a.condition(a))return alertDialog($.extend(a,{okAction:s})),!1;t++}else if("validation"==a.type.toLowerCase())if("function"==typeof a.condition){if(a.condition(a)){s=function(){t++,i()};return"function"==typeof a.okFn&&(s=function(){a.okFn()&&(t++,i())}),alertDialog($.extend(a,{okAction:s})),!1}t++}else t++;else t++}if(t==e.length){for(var c=0;c<n.length;c++){var l=n[c]();if("boolean"==typeof l&&!l)return!1}siteManager.assigningChangeset&&($("#changesetID").val(currentChangesetSelection),$("#removePreviousChangeset").val(document.getElementById("_removePreviousChangeset").checked),"other"==currentChangesetSelection?$("#changesetname").val($("#_changesetname").val()):$("#changesetname").val("")),1==document.contentForm.approved.value&&""!=draftremovalnotice?confirmDialog(draftremovalnotice,(function(){requiresApproval&&(document.contentForm.approved.value||document.contentForm.changesetID.value)?Mura.post(Mura.getAPIEndpoint(),{method:"hasPendingRequest",contentid:document.contentForm.contentid.value,changesetid:document.contentForm.changesetID.value}).then((function(t){t.data.count&&confirmDialog(cancelPendingApproval,(function(){document.contentForm.cancelpendingapproval.value=!0,siteManager.formSubmitted=!0,actionModal((function(){document.contentForm.submit()}))}))})):(document.contentForm.cancelpendingapproval.value=!0,siteManager.formSubmitted=!0,actionModal((function(){document.contentForm.submit()})))})):requiresApproval&&(document.contentForm.approved.value||document.contentForm.changesetID.value)?Mura.post(Mura.getAPIEndpoint(),{method:"hasPendingRequest",contentid:document.contentForm.contentid.value,changesetid:document.contentForm.changesetID.value}).then((function(t){t.data.count?confirmDialog(cancelPendingApproval,(function(){document.contentForm.cancelpendingapproval.value=!0,siteManager.formSubmitted=!0,actionModal((function(){document.contentForm.submit()}))})):(siteManager.formSubmitted=!0,actionModal((function(){document.contentForm.submit()})))})):(document.contentForm.cancelpendingapproval.value=!0,siteManager.formSubmitted=!0,actionModal((function(){document.contentForm.submit()})))}}()},validateAltUrls:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){var e,n,i,a;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(document.querySelectorAll('[name="ismuracontent"]').length){t.next=2;break}return t.abrupt("return",!1);case 2:return e=Object.values(document.getElementsByClassName("alturl-input")),document.querySelectorAll(".altstatuscode select"),n=[],i=document.querySelectorAll('[name="contentid"]')[0].value,e.forEach((function(t){var e="altstatuscode_".concat(t.name.split("_")[1]);""===(e=document.querySelectorAll("select[name='".concat(e,"']"))[0]).className&&siteManager.isAltURLSelected(t.value)&&n.push({value:t.value,name:t.name,statusCode:e.value})})),a=document.querySelector('[name="ismuracontent"]:checked').value,t.next=10,Mura.getEntity("alturl").invoke("validateAltURL",{inputValues:JSON.stringify(n),contentId:i,isMuraContent:a}).then((function(t){if(console.log(t),t.result.haserrors){var e=Object.values(t.result.errors)[0];alertDialog(e)}return t.result.haserrors})).catch((function(t){console.log(t),alertDialog("Internal server error")}));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})))()},isAltURLSelected:function(t){var e,n=_createForOfIteratorHelper(document.getElementById("alturls__selected").children);try{for(n.s();!(e=n.n()).done;){if(e.value.innerText.trim()===t)return!0}}catch(t){n.e(t)}finally{n.f()}return!1},ckContent:function(t,e){var n;if("undefined"!=typeof CKEDITOR)for(n in CKEDITOR.instances)CKEDITOR.instances[n].updateElement();if((Mura("textarea.mura-markdown,textarea.markdownEditor").forEach((function(){var t=Mura(this);markdownInstances&&void 0!==markdownInstances[t.attr("name")]&&t.length&&(t.hasClass("markdown-lazy-init")||t.val(markdownInstances[t.attr("name")].getMarkdown()))})),"undefined"!=typeof isFormBuilder)&&!siteManager.saveFormBuilder())return alertDialog("All fields must have a 'name' before the form can be saved."),!1;if(void 0!==document.contentForm.display)if("2"==document.contentForm.display.value){var i=$(".datepicker.mura-datepickerdisplayStart").val(),a=$(".datepicker.mura-datepickerdisplayStop").val();if(0==isDate(i,"DISPLAY START DATE"))return alertDialog("Please enter a valid date in the 'Display Start Date' field"),!1;if(""!=a&&0==isDate(a,"DISPLAY STOP DATE"))return alertDialog("Please enter a valid date in the 'Display Stop Date' field"),!1}else $(".datepicker.mura-datepickerdisplayStart").val(""),$(".datepicker.mura-datepickerdisplayStop").val(""),$("#mura-displayStart").val(""),$("#mura-displayStop").val("");return""==document.contentForm.title.value?"Component"==document.contentForm.type.value?(alertDialog("The form field 'Menu Title' is required"),!1):"Form"==document.contentForm.type.value?(alertDialog("The form field 'Title' is required"),!1):(alertDialog("The form field 'Long Title' is required"),!1):"Link"==document.contentForm.type.value&&""==document.contentForm.body.value?(alertDialog("The form field 'URL' is required"),!1):!!validateForm(document.contentForm)&&(void 0!==this.hasFileLock&&!this.fileLockConfirmed&&this.hasFileLock&&""!=$("input[name='newfile']").val()?(confirmDialog(this.unlockfileconfirm,(function(){$("#unlockfilewithnew").val("true"),siteManager.ckContent(!1)&&siteManager.submitContentForm()}),(function(){$("#unlockfilewithnew").val("false"),siteManager.ckContent(!1)&&siteManager.submitContentForm()})),this.fileLockConfirmed=!0,!1):!!e||(void 0!==this.hasNodeLock&&this.hasNodeLock&&!this.nodeLockConfirmed?(confirmDialog(this.unlocknodeconfirm,(function(){$("#unlocknodewithpublish").val("true"),siteManager.ckContent(!1)&&siteManager.submitContentForm()}),(function(){$("#unlocknodewithpublish").val("false"),siteManager.ckContent(!1)&&siteManager.submitContentForm()})),this.nodeLockConfirmed=!0,!1):0==document.contentForm.muraPreviouslyApproved.value&&1==document.contentForm.approved.value&&"undefined"!=typeof currentChangesetID&&""!=currentChangesetID?(confirmDialog(publishitemfromchangeset,(function(){siteManager.submitContentForm()})),!1):(siteManager.submitContentForm(),!1)))},DHTML:document.getElementById||document.all||document.layers,lastid:"",getObj:function(t){document.getElementById?(this.obj=document.getElementById(t),this.style=document.getElementById(t).style):document.all?(this.obj=document.all[t],this.style=document.all[t].style):document.layers&&(this.obj=document.layers[t],this.style=document.layers[t])},saveFormBuilder:function(){return!!$("#mura-templatebuilder").templatebuilder("iscomplete")&&(jQuery("#mura-templatebuilder").templatebuilder("save"),!0)},openNewContentMenu:function(t,e,n,i,a,o){var r=parseInt(Mura("#mura-content").width())-120;return r>570&&(r=570),$("#newContentMenuContainer").remove(),$("body").append('<div id="newContentMenuContainer" title="Loading..." style="display:none"><div id="newContentMenu"><div class="load-inline"></div></div></div>'),console.log(getDialogPosition()),$("#newContentMenuContainer").dialog({resizable:!1,modal:!0,width:r,minWidth:570,title:newContentMenuTitle,position:{my:"center",at:"top+120",of:"#mura-content",collision:"fit"},open:function(){$("#newContentMenuContainer").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>');var n="muraAction=cArch.loadnewcontentmenu&siteid="+e+"&contentid="+t+"&parentid="+i+"&topid="+i+"&ptype="+a+"&moduleid="+o+"&cacheid="+Math.random();$("#newContentMenuContainer .load-inline").spin(spinnerArgs2),$.get("./?"+n,(function(t){$("#newContentMenuContainer .load-inline").spin(!1),$("#newContentMenuContainer").html(t),setToolTips(".add-content-ui")}))},close:function(){$(this).dialog("destroy"),$("#newContentMenuContainer").remove()}}),!1},showMenu:function(t,e,n,i,a,o,r,s,c){var l=e.toLowerCase();if(window.innerHeight)window.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)document.documentElement.scrollTop;else if(document.body)document.body.scrollTop;if(window.innerWidth)window.pageXOffset;else if(document.documentElement&&document.documentElement.scrollLeft)document.documentElement.scrollLeft;else if(document.body)document.body.scrollLeft;var d=this.findPosX(n),u=this.findPosY(n);d-=10,document.getElementById("newZoom").style.display="none",document.getElementById("newZoomLink").style.display="none",document.getElementById("newCopy").style.display="none",document.getElementById("newCopyLink").style.display="none",document.getElementById("newCopyAll").style.display="none",document.getElementById("newCopyAllLink").style.display="none",document.getElementById("newPaste").style.display="none",document.getElementById("newPasteLink").style.display="none",document.getElementById("newContentLink").style.display="none",document.getElementById("newContent").style.display="none",document.getElementById("newZoomLink").onclick=function(){return siteManager.loadSiteManagerInTab((function(){return siteManager.loadSiteManager(r,i,c,"","",s,1)})),!1},document.getElementById("newZoom").style.display="",document.getElementById("newZoomLink").style.display="","none"!=l&&"00000000000000000000000000000000099"!=c&&"module"!=s.toLowerCase()&&(document.getElementById("newCopyLink").href="javascript:siteManager.copyThis('"+r+"', '"+i+"','false')",document.getElementById("newCopyAllLink").href="javascript:siteManager.copyThis('"+r+"', '"+i+"','true')",document.getElementById("newCopy").style.display="",document.getElementById("newCopyLink").style.display="",document.getElementById("newCopyAll").style.display="",document.getElementById("newCopyAllLink").style.display="");for(var m,f=n.parentNode.parentNode.getElementsByClassName("actions")[0].getElementsByTagName("ul")[0].getElementsByTagName("li"),g=document.getElementById("newContentOptions"),p=g.getElementsByClassName("li-action");m=p[0];)m.parentNode.removeChild(m);for(var h=document.getElementById("newZoom"),v=0;v<f.length;v++){var y=f[v];if(y.className.indexOf("disabled")<0){var b=document.createElement("li");b.innerHTML=y.innerHTML;var C=b.getElementsByTagName("a")[0],w=C.getAttribute("title");b.className="li-action "+y.className+" "+C.className,C.removeAttribute("title"),C.innerHTML=C.innerHTML+w,y.className.indexOf("edit")>=0&&y.className.indexOf("edit-")<0?g.insertBefore(b,h.nextSibling):y.className.indexOf("edit-layout")>=0?g.insertBefore(b,document.getElementById("newContent")):g.appendChild(b)}}"author"!=l&&"editor"!=l||"00000000000000000000000000000000099"==c||(document.getElementById("newContentLink").onclick=function(){return siteManager.openNewContentMenu(i,r,a,o,s,c),!1},""!=this.copySiteID&&""!=this.copyContentID&&this.copyModuleID==this.currentModuleID&&(document.getElementById("newPasteLink").href="javascript:siteManager.pasteThis('"+i+"')",document.getElementById("newPaste").style.display="",document.getElementById("newPasteLink").style.display=""),document.getElementById("newContentLink").style.display="",document.getElementById("newContent").style.display="",document.getElementById("newCopy").style.border=""),document.getElementById(t).style.top=u+"px",document.getElementById(t).style.left=d+"px",$("#"+t).removeClass("hide"),""!=this.lastid&&this.lastid!=t&&this.hideMenu(this.lastid),this.lastid=t},findPosX:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetLeft,t=t.offsetParent;else t.x&&(e+=t.x);return e},findPosY:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetTop,t=t.offsetParent;else t.y&&(e+=t.y);return e},keepMenu:function(t){$("#"+t).removeClass("hide")},hideMenu:function(t){$("#"+t).addClass("hide")},deleteDisplayObject:function(t){var e=document.getElementById("selectedObjects"+t),n=e.selectedIndex;e.options.length>1&&e.options.length;n<0||(e.options[n]=null,this.updateDisplayObjectList(t),e.options.length&&(e.options[e.options.length-1].selected=!0))},updateDisplayObjectList:function(t){var e=document.getElementById("selectedObjects"+t),n=document.getElementById("objectList"+t);n.value="";for(var i=0;i<e.options.length;i++)""!=n.value?n.value+="^"+e.options[i].value:n.value=e.options[i].value},moveDisplayObjectUp:function(t){var e=document.getElementById("selectedObjects"+t),n=e.selectedIndex;if(!(n<1)){var i=document.createElement("option"),a=document.createElement("option");i.text=e.options[n].text,i.value=e.value,i.selected="selected",a.text=e.options[n-1].text,a.value=e.options[n-1].value,e[n-1]=i,e[n]=a,this.updateDisplayObjectList(t)}},moveDisplayObjectDown:function(t){var e=document.getElementById("selectedObjects"+t),n=e.selectedIndex;if(n!=e.length-1){var i=document.createElement("option"),a=document.createElement("option");i.text=e.options[n].text,i.value=e.options[n].value,i.selected="selected",a.text=e.options[n+1].text,a.value=e.options[n+1].value,e.options[n+1]=i,e.options[n]=a,this.updateDisplayObjectList(t)}},setTargetParams:function(t){var e=!isNaN(t.height.value)&&t.height.value>0?",height="+t.height.value:"",n=!isNaN(t.width.value)&&t.width.value>0?",width="+t.width.value:"",i=!isNaN(t.top.value)&&t.top.value>0?",top="+t.top.value:"",a=!isNaN(t.left.value)&&t.left.value>0?",left="+t.left.value:"",o=""!=t.toolbar.value?",toolbar="+t.toolbar.value:"",r=""!=t.location.value?",location="+t.location.value:"",s=""!=t.directories.value?",directories="+t.directories.value:"",c=""!=t.status.value?",status="+t.status.value:"",l=""!=t.menubar.value?",menubar="+t.menubar.value:"",d=""!=t.resizable.value?",resizable="+t.resizable.value:"",u=""!=t.copyhistory.value?",copyhistory="+t.copyhistory.value:"",m=""!=t.scrollbars.value?",scrollbars="+t.scrollbars.value:"";document.forms.contentForm.targetParams.value=o+r+s+c+l+d+u+m+n+e+i+a},loadSiteParents:function(t,e,n,i,a){$("#mover1").hide();var o="muraAction=cArch.siteParents&compactDisplay=true&siteid="+t+"&contentid="+e+"&parentid="+n+"&keywords="+i+"&isNew="+a+"&cacheid="+Math.random();$("#mover2");$.get("./?"+o,(function(t){$("#mover2").html(t),$("#mover2").show()}))},loadAssocImages:function(t,e,n,i,a,o){var r="muraAction=cArch.assocImages&compactDisplay=true&siteid="+t+"&fileid="+e+"&contentid="+n+"&keywords="+i+"&isNew="+a+"&categoryid="+(o=o||"")+"&cacheid="+Math.random();$("#selectAssocImage");$.get("./?"+r,(function(t){$("#selectAssocImage").html(t),$("#selectAssocImageResults").slideDown()}))},loadObjectClass:function(t,e,n,i,a,o,r){var s="muraAction=cArch.loadclass&compactDisplay=true&siteid="+t+"&classid="+e+"&subclassid="+n+"&contentid="+i+"&parentid="+a+"&instanceid="+r+"&cacheid="+Math.random();if("backEnd"==this.configuratorMode)var c=$("#classList"),l="#classList";else c=$("#configurator"),l="#configurator";return c.html('<div class="load-inline"></div>'),$(l+" .load-inline").spin(spinnerArgs2),$.get("./?"+s,(function(t){$(l+" .load-inline").spin(!1),$(l).html(t),siteManager.availableObjectTemplate="",siteManager.availalbeObjectParams={},siteManager.availableObject={},siteManager.availableObjectValidate=function(){return!0}})),!1},getDisplayObjectClass:function(t){return $("#selectedObjects"+t).val().toString().split("~")[0]},getDisplayObjectID:function(t){return $("#selectedObjects"+t).val().toString().split("~")[2]},loadNotify:function(t,e,n){var i="muraAction=cArch.loadNotify&compactDisplay=true&siteid="+t+"&contentid="+e+"&parentid="+n+"&cacheid="+Math.random(),a=$("#selectNotify");return""==a.html()?(a.show(),a.html('<div class="load-inline"></div>'),$("#selectNotify .load-inline").spin(spinnerArgs2),$.get("./?"+i,(function(t){$("#selectNotify .load-inline").spin(!1),$("#selectNotify").html(t)}))):a.toggle(),!1},loadExpiresNotify:function(t,e,n){var i="muraAction=cArch.loadExpireNotify&compactDisplay=true&siteid="+t+"&contenthistid="+e+"&parentid="+n+"&cacheid="+Math.random(),a=$("#selectExpiresNotify");return""==a.html()?(a.show(),a.html('<div class="load-inline"></div>'),$("#selectExpiresNotify .load-inline").spin(spinnerArgs2),$.get("./?"+i,(function(t){$("#selectExpiresNotify .load-inline").spin(!1),$("#selectExpiresNotify").html(t)}))):a.toggle(),!1},bindDelete:function(){$("a.delete").click((function(){var t=$(this).parent().attr("data-contentid");$(this).parent().remove(),siteManager.setupRCResultIcon($('#selectRelatedContent button[value="'+t+'"]')),siteManager.updateBuckets(),siteManager.updateRCForm(),$("#mura-rc-quickedit").hide()}))},bindMouse:function(){$(".rcSortable li.item:not(.empty), .rcDraggable li.item").mouseup((function(t){1==t.which&&(siteManager.enableBuckets(),$(window).unbind("mousemove"))})).mousedown((function(t){var e=!0;1==t.which&&(siteManager.disableBuckets($(this)),"undefined"!=typeof frontEndProxy&&$(window).bind("mousemove",(function(t){e&&(frontEndProxy.post({cmd:"autoScroll",y:t.pageY}),e=!1)}))),timer=window.setInterval((function(){e=!0}),100)}))},updateBuckets:function(){$(".rcSortable").each((function(t){1==$(this).find("li.item").length?$(this).find("li.empty").removeClass("noShow"):$(this).find("li.empty").addClass("noShow")}))},enableBuckets:function(){$(".rcSortable").each((function(t){$(this).sortable("enable"),$(this).parent().removeClass("disabled")}))},disableBuckets:function(t){$(".rcSortable").each((function(e){$(this).attr("id")!=t.parent().attr("id")&&(("custom"==t.attr("data-content-type").split("/")[0].toLowerCase()&&!$(this).attr("data-accept").length||$(this).attr("data-accept").length&&-1==$(this).attr("data-accept").indexOf(t.attr("data-content-type")))&&($(this).sortable("disable"),$(this).parent().addClass("disabled")),$(this).find('[data-contentid="'+t.attr("data-contentid")+'"]').length>0&&($(this).sortable("disable"),$(this).parent().addClass("disabled")))}))},loadRelatedContent:function(t,e,n,i,a,o,r){void 0===o&&(o=!0);var s=$('input[name="entitytype"]:checked');s.length||(s=$('input[name="entitytype"]')),s=s.length?s.val():"content";var c="muraAction=cArch.loadRelatedContent&compactDisplay=true&contentid="+t+"&siteid="+e+"&external="+o+"&isNew="+n+"&relatedcontentsetid="+r+"&"+i+"&entitytype="+s+"&cacheid="+Math.random();$("#selectRelatedContent").html('<div class="load-inline"></div>'),$("#selectRelatedContent .load-inline").spin(spinnerArgs2),$.get("./?"+c,(function(i){-1!=i.indexOf("mura-primary-login-token")&&(location.href="./"),$("#selectRelatedContent .load-inline").spin(!1),$("#selectRelatedContent").html(i),$(".draggableContainmentInternal").on("scroll",(function(){$("#mura-rc-quickedit").hide()})),$(".rcDraggable li.item").draggable({connectToSortable:".rcSortable",helper:"clone",revert:"invalid",appendTo:"body",start:function(t,e){$("#mura-rc-quickedit").hide(),siteManager.bindMouse()},zIndex:100}).disableSelection(),setDatePickers(".mura-relatedContent-datepicker",dtLocale,dtCh),$("#aAdvancedSearch").click((function(t){t.preventDefault(),$("#rcAdvancedSearch").slideToggle("fast")})),0==n&&1==a&&($("#rcAdvancedSearch").show(),$("#aAdvancedSearch").addClass("active")),siteManager.bindMouse(),setCheckboxTrees(),siteManager.setupRCQuikEdit(),setToolTips(".tab-content"),$("#rcAdvancedSearch").find("ul.categories:not(.checkboxTrees)").css("margin-left","10px"),$(".mura-rc-quickoption").each((function(){siteManager.setupRCResultIcon($(this))})),$("#rcBtnSearch").click((function(n){n.preventDefault();var i=$("#rcAdvancedSearch").is(":visible"),a="#internalContent input";i&&(a='#selectRelatedContent input:not([name="entitytype"]), #selectRelatedContent select'),$("#mura-rc-quickedit").hide(),siteManager.loadRelatedContent(t,e,0,$(a).serialize(),i,o,r)}))}))},loadRelatedContentSets:function(t,e,n,i,a,o,r,s){o=o||"",r=r||"[]";var c=Mura.getQueryStringParams(),l="";void 0!==c.templateid&&(l=c.templateid),void 0===s&&(s=!0);var d="muraAction=cArch.loadSelectedRelatedContent&compactDisplay=true&contenthistid="+e+"&type="+n+"&subtype="+i+"&siteid="+a+"&relatedcontentsetid="+o+"&relateditems="+encodeURIComponent(r)+"&external="+s+"&templateid="+l+"&cacheid="+Math.random(),u=$("#selectedRelatedContent");u.html('<div class="load-inline"></div>'),$("#selectedRelatedContent .load-inline").spin(spinnerArgs2),$.get("./?"+d,(function(e){-1!=e.indexOf("mura-primary-login-token")&&(location.href="./"),$("#selectedRelatedContent .load-inline").spin(!1),u.html(e),siteManager.setupRCSortable(t,s,o)}))},setupRCResultIcon:function(t){$("#selectedRelatedContent").find('li[data-contentid="'+t.val()+'"]').length?t.find("i").attr("class","mi-check"):t.find("i").attr("class","mi-plus-circle")},setupRCQuikEdit:function(){$(".mura-rc-quickoption").each((function(){$(this).unbind("on").on("click",(function(){var t=$(this).val(),e=$("#selectRelatedContent").find('li[data-contentid="'+t+'"]');$("#mura-rc-quickedit").show(),$("#mura-rc-quickedit").offset({top:$(this).offset().top}),$(".mura-rc-quickassign").each((function(){var n=this,i=$("#rcSortable-"+$(n).val());($("#mura-rc-quickedit").show(),$(n).attr("disabled",!1),i.attr("id")!=e.parent().attr("id"))&&(("custom"==e.attr("data-content-type").split("/")[0].toLowerCase()&&!i.attr("data-accept").length||i.attr("data-accept").length&&-1==i.attr("data-accept").indexOf(e.attr("data-content-type")))&&$(n).attr("disabled",!0));$(this).unbind("change"),$(this).prop("checked",i.find('li[data-contentid="'+t+'"]').length),$(this).on("change",(function(){$(this).prop("checked")?(e.clone().appendTo($("#rcSortable-"+$(n).val())),$("#rcSortable-"+$(n).val()).find(".mura-rc-quickoption").remove(),$("#rcSortable-"+$(n).val()).find('li[data-contentid="'+t+'"]').prepend('<a class="delete"></a>')):$("#rcSortable-"+$(n).val()).find('li[data-contentid="'+t+'"]').remove(),siteManager.setupRCResultIcon($('#selectRelatedContent button[value="'+t+'"]')),siteManager.updateBuckets(),siteManager.bindDelete(),siteManager.bindMouse(),siteManager.updateRCForm()}))}))}))}))},setupRCSortable:function(t,e,n){void 0===e&&(e=!0),$(".rcSortable").sortable({connectWith:".rcSortable",revert:"invalid",axis:"y",update:function(t,e){siteManager.updateBuckets(),0==e.item.find("a.delete").length&&e.item.prepend('<a class="delete"></a>'),e.item.attr("style",""),siteManager.bindDelete(),siteManager.bindMouse(),siteManager.setDirtyRelatedContent(),siteManager.updateRCForm(),siteManager.setupRCResultIcon($('#selectRelatedContent button[value="'+e.item.attr("data-contentid")+'"]'))},start:function(){console.log($(this)[0].offsetHeight+" >= "+$(this)[0].scrollHeight),$(this)[0].offsetHeight>=$(this)[0].scrollHeight&&$(this).css("overflow","visible"),siteManager.bindMouse()},stop:function(){$(this).css("overflow","auto"),siteManager.enableBuckets()},cancel:"li.empty"}).disableSelection(),siteManager.loadRelatedContent(t,siteid,1,"",!1,e,n),siteManager.bindDelete(),siteManager.bindMouse(),siteManager.updateRCForm(),siteManager.setupRCQuikEdit()},updateRCForm:function(){var t=new Array;$(".rcSortable").each((function(){var e=new Array,n=new Object;$(this).find(".mura-rc-quickoption").remove(),$(this).find("li.item:not(.empty)").each((function(){void 0===$(this).attr("data-url")?$(this).attr("data-contentid")&&e.push($(this).attr("data-contentid")):$(this).attr("data-url")&&e.push({title:$(this).attr("data-title"),url:$(this).attr("data-url"),contentid:$(this).attr("data-contentid")})})),n.relatedcontentsetid=$(this).attr("data-relatedcontentsetid"),n.items=e,t.push(n)})),$("#relatedContentSetData").val(JSON.stringify(t))},setDirtyRelatedContent:function(){this.dirtyRelatedContent=!0},form_is_modified:function(t){var e;if("undefined"!=typeof CKEDITOR)for(e in CKEDITOR.instances)CKEDITOR.instances[e].updateElement();for(Mura("textarea.mura-markdown,textarea.markdownEditor").forEach((function(){var t=Mura(this);markdownInstances&&void 0!==markdownInstances[t.attr("name")]&&t.length&&(t.hasClass("markdown-lazy-init")||t.val(markdownInstances[t.attr("name")].getMarkdown()))})),e=0;e<t.elements.length;e++){var n=t.elements[e],i=n.type;if("checkbox"==i||"radio"==i){if(n.checked!=n.defaultChecked)return!0}else if("hidden"==i||"password"==i||"text"==i){if(n.value!=n.defaultValue&&"sdContent"!=n.name&&!n.classList.contains("datepicker")&&!n.classList.contains("mura-repeat-option"))return!0}else if("textarea"==i&&n.value!=n.defaultValue)if(n.getAttribute("id")&&void 0!==CKEDITOR.instances[n.getAttribute("id")]){if(CKEDITOR.instances[n.getAttribute("id")].checkDirty())return!0}else{if(void 0===markdownInstances[n.getAttribute("name")])return!0;if(n.value=markdownInstances[n.getAttribute("name")].getMarkdown(),n.value.replace(/[^0-9a-z]/gi,"")!=n.defaultValue.replace(/[^0-9a-z]/gi,""))return!0}}if("undefined"!=typeof FCKeditorAPI){if(FCKeditorAPI.GetInstance("body")&&FCKeditorAPI.GetInstance("body").IsDirty())return!0;if(FCKeditorAPI.GetInstance("summary")&&FCKeditorAPI.GetInstance("summary").IsDirty())return!0;if(this.dirtyRelatedContent)return!0}else if("undefined"!=typeof CKEDITOR&&void 0!==CKEDITOR.instances.body){if(CKEDITOR.instances.body.checkDirty())return console.log("body"),!0}return!1},copyThis:function(t,e,n){var i="muraAction=cArch.saveCopyInfo&siteid="+t+"&contentid="+e+"&moduleid="+siteManager.currentModuleID+"&copyAll="+n+"&cacheid="+Math.random();$.get("./?"+i),this.copyContentID=e,this.copySiteID=t,this.copyModuleID=siteManager.currentModuleID,this.copyAll=n,this.hideMenu("newContentMenu")},pasteThis:function(t){if(this.copyModuleID!=this.currentModuleID)alert("Pasting between modules is not supported.");else{var e="muraAction=cArch.copy&compactDisplay=true&siteid="+this.copySiteID+"&copyAll="+this.copyAll+"&contentid="+this.copyContentID+"&parentid="+t+"&cacheid="+Math.random();$("#newPasteLink").css("background","url(assets/images/ajax-loader.gif) no-repeat 1px 5px;"),this.reloadURL=$("#newZoomLink").attr("href"),actionModal((function(){$.get("./?"+e,(function(e){$("#action-modal").remove(),siteManager.loadSiteManagerInTab((function(){siteManager.loadSiteManager(siteManager.copySiteID,t,siteManager.currentModuleID,"","","",1)}))}))}))}},reloadPage:function(){""==reloadURL?window.location.reload():location.href=this.reloadURL},loadExtendedAttributes:function(t,e,n,i,a,o,r){var s="muraAction=cArch.loadExtendedAttributes&contentHistID="+e+"&type="+n+"&subType="+i+"&siteID="+a+"&tablist="+siteManager.tablist+"&cacheid="+Math.random();return siteID=a,context=o,themeAssetPath=r,$(".extendset-container").each((function(){""!=$(this).html()&&($(this).html('<div class="load-inline"></div>'),$(this).find(".load-inline").spin(spinnerArgs2))})),siteManager.loadRelatedContentSets(t,e,n,i,a),$.ajax({url:"./?"+s,dataType:"text",success:function(t){siteManager.setExtendedAttributes(t)}}),!1},setExtendedAttributes:function setExtendedAttributes(data){var r=eval("("+data+")");$("#tabExtendedAttributes").addClass("hide"),$("#tabExtendedAttributesLI").addClass("hide"),$.each(r,(function(t,e){$("#extendset-container-"+t+" .load-inline").spin(!1),$("#extendset-container-"+t).html(e),"primary"==t&&e.length>0&&($(".block-constrain#mura-content-body-block > .tab-content").addClass("shrink"),$("#mura-content-body-render .mura-content-body-inner").addClass("shrink"))})),defaultTabs=["default","extendedattributes","advanced","layoutobjects","listdisplayoptions","mobile","seo"],$("#tabExtendedAttributes").addClass("hide"),defaultTabs.forEach((function(t,e){r[t]&&$("#tabExtendedAttributes").removeClass("hide")})),r.hassummary?"undefined"!=typeof showSummaryEditor&&showSummaryEditor():"undefined"!=typeof hideSummaryEditor&&hideSummaryEditor(),r.hasbody?"undefined"!=typeof showBodyEditor&&showBodyEditor():"undefined"!=typeof hideBodyEditor&&hideBodyEditor(),r.hasassocfile?($("#assocFileContainer").show(),$("#tabAssoc").show()):($("#assocFileContainer").hide(),$("input[name='newfile']").val(""),$("#tabAssoc").hide()),this.checkExtendSetTargeting(),setHTMLEditors("textarea.mura-html, textarea.htmlEditor"),setCodeEditors("textarea.mura-code, textarea.codeEditor"),setMarkdownEditors("textarea.mura-markdown, textarea.markdownEditor"),setDatePickers("#mura-content-body-block .datepicker,#mura-content-body-block .mura-datepicker",dtLocale),setColorPickers("#mura-content-body-block .mura-colorpicker"),setFinders("#mura-content-body-block .mura-ckfinder, #mura-content-body-block .mura-finder"),setToolTips("#mura-content-body-block"),setFileSelectors();var niceSelects=$(".extendset-container select:not([multiple=multiple])");niceSelects.niceSelect&&niceSelects.each((function(){var t=$(this);(void 0===t.data("niceselect")||t.data("niceselect"))&&(t.attr("name")&&t.addClass("ns-"+t.attr("name")),t.niceSelect())})),$(window).trigger("resize")},checkExtendSetTargeting:function(){var t=$(".extendset"),e=!1,n=!1,i=!0;if(t.length){for(var a=0;a<t.length;a++){var o=t[a];if(null!=o.getAttribute("categoryid")&&""!=o.getAttribute("categoryid")){if(!n){var r=$("categoryContainer").getElementsByTagName("select");n=!0}for(var s=0;s<r.length;s++){var c=r[s],l=r[s].getAttribute("categoryid"),d=o.getAttribute("categoryid");!e&&null!=l&&d.indexOf(l)>-1&&(e=!0,membership=c.value)}e&&""!=membership?(this.setFormElementsDisplay(o,""),o.style.display="",i=!1):(this.setFormElementsDisplay(o,"none"),o.style.display="none")}else this.setFormElementsDisplay(o,""),o.style.display="",i=!1;e=!1}i?($("#extendMessage").show(),$("#extendDL").hide()):($("#extendMessage").hide(),$("#extendDL").show())}},resetExtendedAttributes:function(t,e,n,i,a,o){var r=n.split("^");this.loadExtendedAttributes(t,e,r[0],r[1],i,a,o),document.contentForm.type.value=r[0],document.contentForm.subtype.value=r[1]},setFormElementsDisplay:function(t,e){var n=t.getElementsByTagName("input");if(n.length)for(var i=0;i<n.length;i++)n[i].style.display=e;if((n=t.getElementsByTagName("textarea")).length)for(i=0;i<n.length;i++)n[i].style.display=e;if((n=t.getElementsByTagName("select")).length)for(i=0;i<n.length;i++)n[i].style.display=e},loadCategoryFeatureStartStop:function(t,e,n){var i=$("#"+t);if(i.html().length>10)i.toggle();else if(1==e){var a="muraAction=cArch.loadCategoryFeatureStartStop&id="+t.replace(/editDates/,"")+"&siteID="+n+"&cacheid="+Math.random();i.show(),$.get("./?"+a,(function(e){$("#"+t).html(e),setDatePickers("#"+t+" .datepicker,#"+t+" .mura-datepicker",dtLocale),setToolTips("#"+t)}))}},activeQuickEdit:!1,loadSiteManager:function loadSiteManager(siteid,topid,moduleid,sortby,sortdirection,ptype,startrow,sortedContent){var url="./",pars="muraAction=cArch.loadSiteManager&siteid="+siteid+"&topid="+topid+"&moduleid="+moduleid+"&sortby="+sortby+"&sortdirection="+sortdirection+"&ptype="+ptype+"&startrow="+startrow+"&cacheid="+Math.random();$("#newContentMenu").addClass("hide"),siteManager.currentModuleID=moduleid;var d=$("#gridContainer");return this.activeQuickEdit||(d.html('<div class="load-inline"></div>').show(),$("#gridContainer .load-inline").spin(spinnerArgs2)),$(".site-manager-mod").removeClass("active"),$('.site-manager-mod[data-moduleid="'+moduleid+'"]').addClass("active"),"00000000000000000000000000000000000"==moduleid?$("#gridContainer").addClass("site-tree"):$("#gridContainer").removeClass("site-tree"),$.ajax({url:url+"?"+pars,dataType:"text",success:function success(data){try{var r=eval("("+data+")");siteManager.activeQuickEdit||(d.hide(),$("#gridContainer .load-inline").spin(!1)),d.html(r.html),$("#newContentMenu").addClass("hide"),stripe("stripe"),siteManager.updateSortOrder(sortedContent),siteManager.initQuickEdits(),initDraftPrompt(),setToolTips("#gridContainer"),"editor"==r.perm.toLowerCase()&&"orderno"==r.sortby.toLowerCase()&&($("#sortableKids").sortable({helper:"clone",stop:function(t,e){stripe("stripe"),$(e.item).removeClass("ui-draggable-dragging")},change:function(t,e){siteManager.setAsSorted()},start:function(t,e){$(e.item).addClass("ui-draggable-dragging")},axis:"y",distance:5}),$("#sortableKids").disableSelection())}catch(t){console.log(t),-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),d.html(data)}siteManager.activeQuickEdit||d.hide().animate({opacity:"show"},1e3),siteManager.activeQuickEdit=!1},error:function(t,e,n){console.log("error "+e)}}),!1},sectionLoading:!1,loadSiteFlatByFilter:function(){var t=$("#contentTypeFilter").val();if(""!=t){var e=t.split("^");flatViewArgs.type=e[0],flatViewArgs.subtype=e[1]}else flatViewArgs.type="",flatViewArgs.subtype="";var n=[];$(".categories :checked").each((function(){n.push($(this).val())})),flatViewArgs.categoryid=n.toString();var i=[];if($("input[name='tags']").each((function(){i.push($(this).val())})),flatViewArgs.tags=i.toString(),customtaggroups.length)for(var a=0;a<customtaggroups.length;a++)i=[],$("input[name='"+customtaggroups[a]+"tags']").each((function(){$(this).val().length&&i.push($(this).val())})),flatViewArgs[customtaggroups[a]+"tags"]=i.toString();flatViewArgs.keywords=$("#contentKeywords").val(),flatViewArgs.page=1,flatViewArgs.filtered=!0,this.loadSiteFlat(flatViewArgs)},loadSiteManagerInTab:function(t){return archViewLoaded=!0,window.scrollTo(0,0),$("#gridContainer").html('<div class="load-inline"></div>'),$('#viewTabs a[href="#tabArchitectural"]').tab("show"),t(),!1},loadSiteFlat:function loadSiteFlat(args){var url="./",pars="muraAction=cArch.loadSiteFlat&cacheid="+Math.random(),d=$("#flatViewContainer");return d.html('<div class="load-inline"></div>'),$("#flatViewContainer .load-inline").spin(spinnerArgs2),$("#newContentMenu").addClass("hide"),$.post(url+"?"+pars,args,(function(data){if(-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),$("#flatViewContainer .load-inline").spin(!1),d.html(data),stripe("stripe"),setCheckboxTrees(),setToolTips(".mura-table-grid"),$.ajax({url:"?muraAction=carch.loadtagarray&siteid="+siteid,dataType:"text",success:function success(data){var tagArray=[];if(data)var tagArray=eval("("+data+")");$("#tags").tagSelector(tagArray,"tags")}}),customtaggroups.length)for(var g=0;g<customtaggroups.length;g++)window[customtaggroups[g]]?$("#"+customtaggroups[g]+"tags").tagSelector(window[customtaggroups[g]],customtaggroups[g]+"tags"):$.ajax({url:"?muraAction=carch.loadtagarray&siteid="+siteid+"&taggroup="+customtaggroups[g],context:{taggroup:customtaggroups[g]},dataType:"text",success:function success(data){window[this.taggroup]=eval("("+data+")"),$("#"+this.taggroup+"tags").tagSelector(window[this.taggroup],this.taggroup+"tags")}});$(".navSort a").click((function(t){t.preventDefault(),$(".sortNav .active").toggleClass("active"),$(this).toggleClass("active");var e=$(this).attr("data-sortby");if(e==flatViewArgs.sortby)"asc"==flatViewArgs.sortdirection?flatViewArgs.sortdirection="desc":flatViewArgs.sortdirection="asc";else switch(flatViewArgs.sortby=e,flatViewArgs.sortby){case"menutitle":flatViewArgs.sortdirection="asc";break;case"created":case"lastupdate":case"releasedate":flatViewArgs.sortdirection="desc"}flatViewArgs.page=1,siteManager.loadSiteFlat(flatViewArgs)})),$("#navReports a").click((function(t){t.preventDefault(),$(".navReports .active").toggleClass("active"),$(this).toggleClass("active");var e=$(this).attr("data-report");"mylockedfiles"!=flatViewArgs.report&&"lockedfiles"!=flatViewArgs.report||"mylockedfiles"==e||"lockedfiles"==e||(flatViewArgs.type=""),flatViewArgs.report=e,"mylockedfiles"!=flatViewArgs.report&&"lockedfiles"!=flatViewArgs.report||(flatViewArgs.type="File"),flatViewArgs.page=1,siteManager.loadSiteFlat(flatViewArgs)})),$("#tabFlat .moreResults a").click((function(t){t.preventDefault(),$("#tabFlat .moreResults a").toggleClass("active"),$(this).toggleClass("active"),flatViewArgs.page=$(this).attr("data-page"),siteManager.loadSiteFlat(flatViewArgs)})),initDraftPrompt(),d.hide().animate({opacity:"show"},1e3)})),!1},loadSiteSection:function loadSiteSection(node,startrow){var clearTimer=function(){$("#mura-section-loading").spin(!1),$("#mura-section-loading").remove(),$("#mura-grid-loader").remove(),clearTimeout(startTimer)};if(clearTimer(),!this.sectionLoading){this.sectionLoading=!0;var url="./index.cfm",pars="muraAction=cArch.loadSiteSection&siteid="+node.attr("data-siteid")+"&contentID="+node.attr("data-contentid")+"&moduleid="+node.attr("data-moduleid")+"&sortby="+node.attr("data-sortby")+"&sortdirection="+node.attr("data-sortdirection")+"&ptype="+node.attr("data-type")+"&startrow="+startrow+"&cacheid="+Math.random(),icon=node.find("span:first");if(icon.hasClass("hasChildren closed")){var startTimer=setTimeout((function(){node.prepend('<div id="mura-section-loading" class="spinner-wrap"></div>'),$(".mura-grid").prepend('<div id="mura-grid-loader"></div>'),$("#mura-section-loading").spin(spinnerArgs3)}),1e3);icon.removeClass("hasChildren closed"),icon.addClass("hasChildren open"),$.ajax({url:url+"?"+pars,dataType:"text",success:function success(data){try{var r=eval("("+data+")");node.find(".mura-section:first").remove(),node.append(r.html),$("#newContentMenu").addClass("hide"),stripe("stripe"),initDraftPrompt(),siteManager.initQuickEdits(),document.all&&document.querySelector&&!document.addEventListener||node.find(".mura-section:first").hide().fadeIn("slow")}catch(t){-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),node.append(data)}clearTimer(),siteManager.sectionLoading=!1}})}else icon.removeClass("hasChildren open"),icon.addClass("hasChildren closed"),$.get(url+"?"+pars),node.find(".mura-section:first").fadeOut("fast",(function(){node.find(".mura-section:first").remove(),stripe("stripe"),$("#newContentMenu").addClass("hide"),siteManager.sectionLoading=!1}))}return!1},refreshSiteSection:function refreshSiteSection(node,startrow){if(!this.sectionLoading){this.sectionLoading=!0;var url="./",pars="muraAction=cArch.refreshSiteSection&siteid="+node.attr("data-siteid")+"&contentID="+node.attr("data-contentid")+"&moduleid="+node.attr("data-moduleid")+"&sortby="+node.attr("data-sortby")+"&sortdirection="+node.attr("data-sortdirection")+"&ptype="+node.attr("data-type")+"&startrow="+startrow+"&cacheid="+Math.random();$.ajax({url:url+"?"+pars,dataType:"text",success:function success(data){try{var r=eval("("+data+")");node.find(".mura-section:first").remove(),node.append(r.html),$("#newContentMenu").addClass("hide"),stripe("stripe"),initDraftPrompt(),siteManager.initQuickEdits()}catch(t){-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),node.append(data)}siteManager.activeQuickEdit=!1,siteManager.sectionLoading=!1}})}return!1},updateSortOrder:function(t){if(t){var e=$("#sortableKids"),n=e.clone();e.empty(),t.each((function(t,i){var a=$(i),o=n.find("li[data-contentid='"+a.attr("data-contentid")+"']");e.append(o)})),$("#sorted").val("true"),$("#sitemgr-reorder").show()}},setAsSorted:function(){$("#sorted").val("true"),$("#sitemgr-reorder").fadeIn()},initQuickEdits:function(){$(".mura-quickEditItem").off("click").click((function(t){t.preventDefault();var e=$("#selected");if(e.length>0){var n=e.find("a.mura-quickEditItem");n.data("clicked",!n.data("clicked"))}if($(this).data("clicked",!$(this).data("clicked")),$(this).data("clicked")&&!this.activeQuickEdit){var i=$(this).attr("data-attribute"),a=$(this).parents("li:first"),o="muraAction=cArch.loadQuickEdit&siteid="+siteid+"&contentID="+a.attr("data-contentid")+"&attribute="+i+"&cacheid="+Math.random();$("#mura-quickEditor").remove(),$("#selected").attr("id",""),$("#selectedIcon").attr("id","").attr("src","assets/images/icons/template_24x24.png"),$(this).parent().prepend(quickEditTmpl);var r=$("#mura-quickEditor").parents("dd:first");r.attr("id","selected"),$.get("./?"+o,(function(t){if(-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#mura-quickEditor").html(t),$("#mura-quickEditor").find("input, select").bind("mousedown.ui-disableSelection selectstart.ui-disableSelection",(function(t){t.stopImmediatePropagation()})),setDatePickers(".mura-quickEdit-datepicker",dtLocale,dtCh),setToolTips(".mura-quickEdit-datepicker"),setDatePickers("#mura-datepicker-displayStart",dtLocale,dtCh),setDatePickers("#mura-datepicker-displayStop",dtLocale,dtCh),setDatePickers("#displayIntervalEndOn",dtLocale,dtCh),$("#hasDraftsMessage").length&&r.addClass("hasDraft"),"template"==i){var e=r.find("img:first");e.length&&e.attr("id","selectedIcon").attr("src","assets/images/icons/template_24x24-on.png")}}))}}))},saveQuickEdit:function(){this.activeQuickEdit=!0;var t=$("#mura-quickEditor").parent().find(".mura-quickEditItem:first").attr("data-attribute"),e=$("#mura-quickEditor").parents("li:first"),n={muraAction:"cArch.saveQuickEdit",siteID:siteID,contentID:e.attr("data-contentid"),attribute:t};if("isnav"==t)var i={isnav:$("#mura-quickEdit-isnav").val()};else if("inheritObjects"==t)i={inheritObjects:$("#mura-quickEdit-inheritobjects").val()};else if("template"==t)i={template:$("#mura-quickEdit-template").val(),childTemplate:$("#mura-quickEdit-childtemplate").val()};else if("display"==t)i={display:$("#mura-display").val()};var a=$.extend({},n,i),o=null;"true"==document.forms.viewUpdate.sorted.value&&(o=$("ul#sortableKids > li")),$("#mura-quickEditor").html('<img class="loader" src="assets/images/ajax-loader-alt.gif" />'),$.ajax({type:"POST",url:"./index.cfm?"+e.attr("data-csrf"),data:a,success:function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./");var n=e.parents("li:first");if(n.parents("li:first").length)siteManager.refreshSiteSection(n,1);else{var i=$("#top-node").parents("li:first");siteManager.loadSiteManager(i.attr("data-siteid"),i.attr("data-contentid"),i.attr("data-moduleid"),i.attr("data-sortby"),i.attr("data-sortdirection"),i.attr("data-type"),1,o)}},error:function(t,e,n){alert(t.responseText)},dataType:"text"})},closeQuickEdit:function(){var t=$("#selected"),e=t.find("a.mura-quickEditItem");e.data("clicked",!e.data("clicked")),t.attr("id",""),$("#selectedIcon").attr("id","").attr("src","assets/images/icons/template_24x24.png"),$(".mura-quickEdit").remove()},initCategoryAssignments:function(){$(".mura-quickEditItem").click((function(t){t.preventDefault();var e=$(this).parents("li:first"),n=e.attr("data-cattrim"),i={muraAction:"cArch.loadCategoryAssignment",cattrim:e.attr("data-cattrim"),siteID:e.attr("data-siteid"),categoryID:e.attr("data-categoryid"),categoryAssignment:$("#categoryAssign"+n).val(),featureStart:"",startHour:"",startMinute:"",startDayPart:"",featureStop:"",stopHour:"",stopMinute:"",stopDayPart:""};"2"==i.categoryAssignment&&$.extend(i,{featureStart:$("#featureStart"+n).val(),startHour:$("#startHour"+n).val(),startMinute:$("#startMinute"+n).val(),startDayPart:$("#startDayPart"+n).val(),featureStop:$("#featureStop"+n).val(),stopHour:$("#stopHour"+n).val(),stopMinute:$("#stopMinute"+n).val(),stopDayPart:$("#stopDayPart"+n).val()}),$("#mura-quickEditor").remove(),$("#selected").attr("id",""),$("#selectedIcon").attr("id","").attr("src","assets/images/icons/template_24x24.png"),$(this).parent().prepend(quickEditTmpl);var a=$("#mura-quickEditor").parents("dd:first");$(a).attr("id","selected"),$.ajax({type:"POST",url:"./index.cfm",data:i,success:function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#mura-quickEditor").html(t),setDatePickers(".mura-quickEdit-datepicker",dtLocale,dtCh),setToolTips(".mura-quickEdit-datepicker")},error:function(t,e,n){alert(n)},dataType:"text"})}))},saveCategoryAssignment:function(){var t=$("#mura-quickEdit-cattrim").val(),e={muraAction:"cArch.loadCategoryFeatureStartStop",cattrim:t,categoryAssignment:$("#mura-quickEdit-display").val(),featureStart:$("#mura-quickEdit-featureStart").val(),startHour:$("#mura-quickEdit-startHour").val(),startMinute:$("#mura-quickEdit-startMinute").val(),startDayPart:$("#mura-quickEdit-startDayPart").length?$("#mura-quickEdit-startDayPart").val():"",featureStop:$("#mura-quickEdit-featureStop").val(),stopHour:$("#mura-quickEdit-stopHour").val(),stopMinute:$("#mura-quickEdit-stopMinute").val(),stopDayPart:$("#mura-quickEdit-stopDayPart").length?$("#mura-quickEdit-stopDayPart").val():"",siteid:siteid};$("#mura-quickEditor").html('<img class="loader" src="assets/images/ajax-loader-alt.gif" />'),$.ajax({type:"POST",url:"./index.cfm",data:e,success:function(e){-1!=e.indexOf("mura-primary-login-token")&&(location.href="./"),$("#categoryLabelContainer"+t).html(e),siteManager.closeCategoryAssignment(),setToolTips(".mura-quickEdit-datepicker"),siteManager.initCategoryAssignments()},error:function(t,e,n){alert(n)},dataType:"text"})},closeCategoryAssignment:function(){$("#selected").attr("id",""),$(".mura-quickEdit").remove()},availableObjectTemplate:"",availalbeObjectParams:{},availableObject:{},availableObjectValidate:function(){return!0},getDisplayObjectConfig:function(t){var e=$("#selectedObjects"+t).val().toString().split("~"),n={};return n.object=e[0],n.name=e[1],n.objectid=e[2],e.length>3&&(n.params=e[3]),n.regionid=t,n.context=context,n.siteid=siteid,n.contentid=contentid,n.contenthistid=contenthistid,n.parentid=parentid,n},addDisplayObject:function addDisplayObject(objectToAdd,regionid,configure,isUpdate){var tmpObject="",tmpValue="",tmpText="";if(isUpdate=isUpdate||!1,"string"==typeof objectToAdd){if(null==document.getElementById(objectToAdd))return alertDialog("Please select a display object."),!1;if("select"==document.getElementById(objectToAdd).tagName.toLowerCase()){if(-1==document.getElementById(objectToAdd).selectedIndex)return alertDialog("Please select a display object."),!1;var addIndex=document.getElementById(objectToAdd).selectedIndex;if(addIndex<0)return!1;var addoption=document.getElementById(objectToAdd).options[addIndex];tmpText=addoption.text,tmpValue=addoption.value}else if("input"==document.getElementById(objectToAdd).tagName.toLowerCase()){var addoption=document.getElementById(objectToAdd);tmpValue=addoption.value}else addoption=document.getElementById(objectToAdd);try{tmpObject=eval("("+addoption.value+")")}catch(t){tmpObject=addoption.value}}else tmpObject=objectToAdd;var checkSelection=!1;if("object"==_typeof(tmpObject)){if(tmpObject.regionid=regionid,tmpObject.context=context,tmpObject.siteid=siteid,tmpObject.contentid=contentid,tmpObject.contenthistid=contenthistid,tmpObject.parentid=parentid,"feed"==tmpObject.object){if(configure&&(tmpObject.regionid=regionid,this.initFeedConfigurator(tmpObject)))return!1;checkSelection=!0}if("feed_slideshow"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initSlideShowConfigurator(tmpObject),!1;checkSelection=!0}if("tag_cloud"==tmpObject.object&&siteManager.customtaggroups.length){if(configure)return tmpObject.regionid=regionid,this.initTagCloudConfigurator(tmpObject),!1;checkSelection=!0}if(siteManager.allowopenfeeds&&"category_summary"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initCategorySummaryConfigurator(tmpObject),!1;checkSelection=!0}if("related_content"==tmpObject.object||"related_section_content"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initRelatedContentConfigurator(tmpObject),!1;checkSelection=!0}if("site_map"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initSiteMapConfigurator(tmpObject),!1;checkSelection=!0}if("plugin"==tmpObject.object){if(configure)if(tmpObject.objectid&&"none"!=tmpObject.objectid.toLowerCase()){var configurator=this.getPluginConfigurator(tmpObject.objectid);if(""!=configurator)return window[configurator](tmpObject),!1;if(siteManager.layoutmanager)return this.initGenericConfigurator(tmpObject),!1}else siteManager.layoutmanager&&this.initGenericConfigurator(tmpObject);checkSelection=!0}if(siteManager.layoutmanager&&(configure&&(siteManager.objectHasConfigurator(tmpObject)?siteManager.configuratorMap[tmpObject.object].initConfigurator(tmpObject):this.initGenericConfigurator(tmpObject)),checkSelection=!0),tmpValue=tmpObject.object,tmpValue=tmpValue+"~"+tmpObject.name,tmpValue=tmpValue+"~"+tmpObject.objectid,"string"==typeof tmpObject.params?tmpValue=tmpValue+"~"+tmpObject.params:"object"==_typeof(tmpObject.params)&&(tmpValue=tmpValue+"~"+JSON.stringify(tmpObject.params)),!isUpdate&&checkSelection&&-1!=document.getElementById("selectedObjects"+regionid).selectedIndex){var currentSelection=this.getDisplayObjectConfig(regionid);currentSelection&&(currentSelection.objectid!=tmpObject.objectid&&currentSelection.objectid!=tmpObject.originid||(isUpdate=!0))}tmpText=tmpObject.name}if(""==tmpValue)return alertDialog("Please select a display object."),!1;var selectedObjects=document.getElementById("selectedObjects"+regionid);if(selectedObjects.options.length)for(var i=0;i<selectedObjects.options.length;i++)if(selectedObjects.options[i].value==tmpValue)return selectedObjects.selectedIndex=i,!1;if(isUpdate&&-1!=selectedObjects.selectedIndex)myoption=selectedObjects.options[selectedObjects.selectedIndex],myoption.text=tmpText,myoption.value=tmpValue;else{var myoption=document.createElement("option");selectedObjects.appendChild(myoption),myoption.text=tmpText,myoption.value=tmpValue,myoption.selected="selected"}return this.updateDisplayObjectList(regionid),!0},initTagCloudConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=tag_cloud&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&instanceid="+t.instanceid+"&cacheid="+Math.random(),title:tagCloudConfiguratorTitle}),!0},initSiteMapConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=site_map&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&instanceid="+t.instanceid+"&cacheid="+Math.random(),title:siteMapConfiguratorTitle}),!0},initCategorySummaryConfigurator:function(t){return(void 0===t.object||"category_summary"==t.object)&&(this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=category_summary&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&instanceid="+t.instanceid+"&cacheid="+Math.random(),title:categorySummaryConfiguratorTitle}),!0)},initFeedConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=feed&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&feedid="+t.objectid+"&instanceid="+t.instanceid+"&cacheid="+Math.random(),title:"Loading...",init:function(t,e){"string"==typeof t.type&&"remote"==t.type.toLowerCase()?"frontEnd"==siteManager.configuratorMode?$("#configuratorHeader").html(remoteFeedConfiguratorTitle):$("#configuratorContainer").dialog("option","title",remoteFeedConfiguratorTitle):"frontEnd"==siteManager.configuratorMode?$("#configuratorHeader").html(localIndexConfiguratorTitle):$("#configuratorContainer").dialog("option","title",localIndexConfiguratorTitle),$("#availableListSort").length&&$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$.trim($(this).html())):$("#displayList").val($.trim($(this).html()))})),siteManager.layoutmanager?siteManager.updateObjectPreview():siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initFolderConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=folder&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&feedid="+t.objectid+"&instanceid="+t.instanceid+"&cacheid="+Math.random(),title:"Loading...",init:function(t,e){folderConfiguratorTitle="Folder","frontEnd"==siteManager.configuratorMode?$("#configuratorHeader").html(folderConfiguratorTitle):$("#configuratorContainer").dialog("option","title",folderConfiguratorTitle),$("#availableListSort").length&&$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$.trim($(this).html())):$("#displayList").val($.trim($(this).html()))})),siteManager.layoutmanager?siteManager.updateObjectPreview():siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initSlideShowConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=feed_slideshow&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&feedid="+t.objectid+"&instanceid="+t.instanceid+"&cacheid="+Math.random(),title:slideShowConfiguratorTitle,init:function(t,e){$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$(this).html()):$("#displayList").val($(this).html())})),siteManager.layoutmanager?siteManager.updateObjectPreview():siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initRelatedContentConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid="+t.object+"&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&instanceid="+t.instanceid+"&cacheid="+Math.random(),title:relatedContentConfiguratorTitle,init:function(t,e){$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$(this).html()):$("#displayList").val($(this).html())})),siteManager.layoutmanager?siteManager.updateObjectPreview():siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initGenericConfigurator:function(t){return this.resetAvailableObject(),"backEnd"==this.configuratorMode&&this.resetConfiguratorContainer(),siteManager.layoutmanager?this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid="+t.object+"&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&instanceid="+t.instanceid+"&cacheid="+Math.random(),title:t.title||t.name,iconclass:t.iconclass,init:function(t,e){}}):$("#configuratorContainer").dialog({resizable:!0,modal:!0,width:400,title:t.title||t.name,position:getDialogPosition(),buttons:{Cancel:function(){$(this).dialog("close")}},open:function(){$("#configurator").html('<div class="ui-dialog-content ui-widget-content">'+genericConfiguratorMessage+"</div>")},close:function(){$(this).dialog("destroy")}}),!0},updateAvailableObject:function(){var t={};Mura(".objectParam, .objectparam").each((function(){var e=Mura(this);if(e.is("SELECT")&&e.hasClass("ns-"+e.attr("name"))){var n=Mura("div.nice-select.ns-"+e.attr("name"));n.length&&(n=n.find("li.selected")),n.length&&e.val(n.attr("data-value"))}if(null!=e.val()&&("radio"!=e.attr("type")||"radio"==e.attr("type")&&e.is(":checked"))){if(e.data("param"))var i=e.data("param");else i=e.attr("name");"undefined"!=typeof CKEDITOR&&e.attr("id")&&void 0!==CKEDITOR.instances[e.attr("id")]&&CKEDITOR.instances[e.attr("id")].updateElement(),i&&(void 0===t[i]?"checkbox"!=e.attr("type")||e.is(":checked")?t[i]=e.val():t[i]="":("checkbox"!=e.attr("type")||e.is(":checked"))&&(t[i]=t[i]+","+e.val()))}}));var e={},n=["object","meta","content"],i=["xl","lg","md","sm","xs"];for(var a in n){var o=n[a];for(var r in i){if("xl"==(d=i[r]))var s=o;else s=o+"_"+d+"_";var c=s+"styles";e[c]={},Mura("."+s+"Style, ."+s+"style").each((function(){var t=Mura(this);if(null!=t.val()&&("radio"!=t.attr("type")||"radio"==t.attr("type")&&t.is(":checked"))){if(t.data("param"))var n=t.data("param");else n=t.attr("name");n&&(void 0===e[c][n]?"checkbox"!=t.attr("type")||t.is(":checked")?e[c][n]=t.val():e[c][n]="":("checkbox"!=t.attr("type")||t.is(":checked"))&&(e[c][n]=e[c][n]+","+t.val())),void 0!==e[c][n]&&""==e[c][n]&&delete e[c][n]}}))}}var l={};for(var d in Mura(".styleSupport, .stylesupport").each((function(){var t=Mura(this);if(null!=t.val()&&("radio"!=t.attr("type")||"radio"==t.attr("type")&&t.is(":checked"))){if(t.data("param"))var e=t.data("param");else e=t.attr("name");e&&(void 0===l[e]?"checkbox"!=t.attr("type")||t.is(":checked")?l[e]=t.val():l[e]="":("checkbox"!=t.attr("type")||t.is(":checked"))&&(l.stylesupport[e]=l[e]+","+t.val())),void 0!==l[e]&&""==l[e]&&delete l[e]}})),this.availableObject=Mura.extend({},this.availableObjectTemplate),this.availableObject.params=t,l.objectstyles=e.objectstyles||{},l.object_lg_styles=e.object_lg_styles||{},l.object_md_styles=e.object_md_styles||{},l.object_sm_styles=e.object_sm_styles||{},l.object_xs_styles=e.object_xs_styles||{},void 0!==this.availableObject.params.label&&this.availableObject.params.label?(l.metastyles=e.metastyles||{},l.meta_lg_styles=e.meta_lg_styles||{},l.meta_md_styles=e.meta_md_styles||{},l.meta_sm_styles=e.meta_sm_styles||{},l.meta_xs_styles=e.meta_xs_styles||{}):(l.metastyles={},l.meta_lg_styles={},l.meta_md_styles={},l.meta_sm_styles={},l.meta_xs_styles={}),l.contentstyles=e.contentstyles||{},l.content_lg_styles=e.content_lg_styles||{},l.content_md_styles=e.content_md_styles||{},l.content_sm_styles=e.content_sm_styles||{},l.content_xs_styles=e.content_xs_styles||{},void 0!==l.objectstyles&&void 0===l.objectstyles.minHeight&&(delete l.objectminheightuom,delete l.objectminheightnum),void 0!==l.contentstyles&&(void 0===l.contentstyles.width&&(delete l.contentwidthuom,delete l.contentwidthnum),void 0===l.contentstyles.minHeight&&(delete l.contentminheightuom,delete l.contentminheightnum)),i)void 0!==l["object"+(d="xl"==i[d]?"":"_"+i[d]+"_")+"styles"]&&(void 0===l["object"+d+"styles"].minHeight&&(delete l["object"+d+"minheightuom"],delete l["object"+d+"minheight"]),void 0===l["object"+d+"styles"].width&&delete l["object"+d+"widthuom"],void 0===l["object"+d+"styles"].backgroundImage&&(delete l["object"+d+"backgroundimageurl"],delete l["object"+d+"BackgroundPositionX"],delete l["object"+d+"BackgroundPositionY"],delete l["object"+d+"styles"].backgroundRepeat,delete l["object"+d+"styles"].backgroundSize,delete l["object"+d+"styles"].backgroundAttachment)),void 0!==l["meta"+d+"styles"]&&(void 0===l["meta"+d+"styles"].minHeight&&(delete l["meta"+d+"minheightuom"],delete l["meta"+d+"minheight"]),void 0===l["meta"+d+"styles"].width&&delete l["meta"+d+"widthuom"],void 0===l["meta"+d+"styles"].backgroundImage&&(delete l["meta"+d+"backgroundimageurl"],delete l["meta"+d+"BackgroundPositionX"],delete l["meta"+d+"BackgroundPositionY"],delete l["meta"+d+"styles"].backgroundRepeat,delete l["meta"+d+"styles"].backgroundSize,delete l["meta"+d+"styles"].backgroundAttachment)),void 0!==l["content"+d+"styles"]&&(void 0===l["content"+d+"styles"].minHeight&&(delete l["content"+d+"minheightuom"],delete l["content"+d+"minheight"]),void 0===l["content"+d+"styles"].width&&delete l["content"+d+"widthuom"],void 0===l["content"+d+"styles"].backgroundImage&&(delete l["content"+d+"backgroundimageurl"],delete l["content"+d+"BackgroundPositionX"],delete l["content"+d+"BackgroundPositionY"],delete l["content"+d+"styles"].backgroundRepeat,delete l["content"+d+"styles"].backgroundSize,delete l["content"+d+"styles"].backgroundAttachment)),void 0!==l["object"+d+"styles"]&&(l["object"+d+"styles"].marginTop||l["object"+d+"styles"].marginLeft||l["object"+d+"styles"].marginBottom||l["object"+d+"styles"].marginRight||delete l["object"+d+"marginuom"],l["object"+d+"styles"].paddingTop||l["object"+d+"styles"].paddingLeft||l["object"+d+"styles"].paddingBottom||l["object"+d+"styles"].paddingRight||delete l["object"+d+"paddinguom"]),void 0!==l["meta"+d+"styles"]&&(l["meta"+d+"styles"].marginTop||l["meta"+d+"styles"].marginLeft||l["meta"+d+"styles"].marginBottom||l["meta"+d+"styles"].marginRight||delete l["meta"+d+"marginuom"],l["meta"+d+"styles"].paddingTop||l["meta"+d+"styles"].paddingLeft||l["meta"+d+"styles"].paddingBottom||l["meta"+d+"styles"].paddingRight||delete l["meta"+d+"paddinguom"]),void 0!==l["content"+d+"styles"]&&(l["content"+d+"styles"].marginTop||l["content"+d+"styles"].marginLeft||l["content"+d+"styles"].marginBottom||l["content"+d+"styles"].marginRight||delete l["content"+d+"marginuom"],l["content"+d+"styles"].paddingTop||l["content"+d+"styles"].paddingLeft||l["content"+d+"styles"].paddingBottom||l["content"+d+"styles"].paddingRight||delete l["content"+d+"paddinguom"]);var u=["backgroundImage","backgroundAttachment","backgroundRepeat","backgroundSize"];if(!l.objectbackgroundimageurl){for(var m=["objectbackgroundimageurl","objectBackgroundPositionY","objectbackgroundpositiony","objectBackgroundPositionX","objectbackgroundpositionx","objectbackgroundimageurl"],f=0;f<m.length;f++)void 0!==l[m[f]]&&delete l[m[f]];for(f=0;f<u.length;f++)void 0!==l.objectstyles[u[f]]&&delete l.objectstyles[u[f]]}if(!l.metabackgroundimageurl){for(m=["metabackgroundimageurl","metaBackgroundPositionY","metabackgroundpositiony","metaBackgroundPositionX","metabackgroundpositionx","metabackgroundimageurl"],f=0;f<m.length;f++)void 0!==l[m[f]]&&delete l[m[f]];for(f=0;f<u.length;f++)void 0!==l.metastyles[u[f]]&&delete l.metastyles[u[f]]}if(!l.contentbackgroundimageurl){for(m=["contentbackgroundimageurl","contentBackgroundPositionY","contentbackgroundpositiony","contentBackgroundPositionX","contentbackgroundpositionx","contentbackgroundimageurl"],f=0;f<m.length;f++)void 0!==l[m[f]]&&delete l[m[f]];for(f=0;f<u.length;f++)void 0!==l.contentstyles[u[f]]&&delete l.contentstyles[u[f]]}for(var g in l)l.hasOwnProperty(g)&&"object"==_typeof(l[g])&&!Array.isArray(l[g])&&0===Object.entries(l[g]).length&&delete l[g];this.availableObject.params.stylesupport=JSON.stringify(l),"object"==("undefined"==typeof originParams?"undefined":_typeof(originParams))&&(this.availableObject.params=$.extend(originParams,this.availableObject.params)),this.availableObject.params.label||(this.availableObject.params.labeltag=""),this.updateConfiguratorConditionals(this.availableObject.params)},updateConfiguratorConditionals:function updateConfiguratorConditionals(params){params=params||availableObject.params||{};var evalBooleanWithinContext=function evalBooleanWithinContext(context,code){return function(code){return eval(code)}.apply(context,[code.toString().replace(/params\./g,"this.").replace(/props\./g,"this.")])};Mura(".mura-control-group[data-condition], .mura-control-group[data-condition]").each((function(){var t=Mura(this);t.data("condition")&&function(e){try{evalBooleanWithinContext(e,t.data("condition"))?t.show():t.hide()}catch(e){console.log("error evaluating param",e),t.show()}}(params)}))},configuratorMap:{container:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},collection:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},text:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},embed:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},feed:{condition:function(){return!0},initConfigurator:function(t){siteManager.initFeedConfigurator(t)}},form:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},component:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},folder:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},gallery:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},calendar:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},form_responses:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},plugin:{condition:function(){return!0},initConfigurator:function(t){if(t.objectid&&"none"!=t.objectid.toLowerCase()&&siteManager.getPluginConfigurator(t.objectid)){var e=siteManager.getPluginConfigurator(t.objectid);window[e](t)}else siteManager.initGenericConfigurator(t)}},feed_slideshow:{condition:function(){return!0},initConfigurator:function(t){siteManager.initSlideShowConfigurator(t)}},tag_cloud:{condition:function(){return siteManager.customtaggroups.length},initConfigurator:function(t){siteManager.initTagCloudConfigurator(t)}},category_summary:{condition:function(){return!0},initConfigurator:function(t){siteManager.allowopenfeeds?siteManager.initCategorySummaryConfigurator(t):siteManager.initGenericConfigurator(t)}},archive_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},calendar_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},category_summary_rss:{condition:function(){return siteManager.allowopenfeeds},initConfigurator:function(t){siteManager.initCategorySummaryConfigurator(t)}},site_map:{condition:function(){return!0},initConfigurator:function(t){siteManager.initSiteMapConfigurator(t)}},related_content:{condition:function(){return!0},initConfigurator:function(t){siteManager.initRelatedContentConfigurator(t)}},related_section_content:{condition:function(){return!0},initConfigurator:function(t){siteManager.initRelatedContentConfigurator(t)}},system:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},comments:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},favorites:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},forward_email:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},event_reminder_form:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},rater:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},user_tools:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},goToFirstChild:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},navigation:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},sub_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},peer_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},standard_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},portal_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},folder_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},multilevel_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},seq_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},top_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},mailing_list:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},mailing_list_master:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}}},customtaggroups:[],allowopenfeeds:!1,objectHasConfigurator:function(t){return t.object in this.configuratorMap&&this.configuratorMap[t.object].condition()},initDisplayObjectConfigurators:function(){var t=this;$(".displayRegions").dblclick((function(){var e=$(this).attr("data-regionid"),n=t.getDisplayObjectConfig(e);t.objectHasConfigurator(n)?t.configuratorMap[n.object].initConfigurator(n):t.initGenericConfigurator(n)}))},resetAvailableObject:function(){this.availableObjectTemplate="",this.availableObject={},this.availableObjectValidate=function(){return!0}},resetConfiguratorContainer:function(){$("#configuratorContainer").remove(),$("body").append('<div id="configuratorContainer" title="Loading..." style="display:none"></div>');$("#configuratorContainer").html('<div id="configurator"><div class="load-inline"></div></div>'),$("#configuratorContainer .load-inline").spin(spinnerArgs2)},getConfiguratorTargets:function(){var t=[];return[".object",".meta",".content"].forEach((function(e){t.push(e+"style"),t.push(e+"Style"),["_lg_","_md_","_sm_","_xs_"].forEach((function(n){t.push(e+n+"style"),t.push(e+n+"Style")}))})),".objectParam, .objectparam, .styleSupport, .stylesupport,"+t.join()},initConfiguratorParams:function(){this.updateAvailableObject(),$(this.getConfiguratorTargets()).bind("change",(function(){siteManager.updateAvailableObject()}))},setContentDisplayListSort:function(){$("#contentAvailableListSort, #contentDisplayListSort").sortable({connectWith:".contentDisplayListSortOptions",update:function(t){t.stopPropagation(),$("#contentDisplayList").val(""),$("#contentDisplayListSort > li").each((function(){var t=$("#contentDisplayList").val();""!=t?$("#contentDisplayList").val(t+","+$.trim($(this).html())):$("#contentDisplayList").val($.trim($(this).html()))}))}}).disableSelection()},configuratorMode:"backEnd",previewURL:"",loadObjectPreview:function(t){var e="core/utilities/objectpreview/";if(e+="?siteid=",e+=t.siteid,e+="&contenthistid=",e+=t.contenthistid,e+="&parentid=",e+=t.parentid,e+="&object=",e+=t.object,e+="&compactDisplay=true",e+="&objectid=",e+=t.objectid,e+="&params=",(e+=escape(t.params))!=siteManager.previewURL){var n=$("#configuratorPreview");n.length&&(siteManager.previewURL=e,n.attr("src",siteManager.previewURL))}},updateObjectPreview:function(){siteManager.updateAvailableObject(),configOptions.params=JSON.stringify(siteManager.availableObject.params),siteManager.loadObjectPreview(configOptions)},initConfigurator:function initConfigurator(data,config){if(this.resetAvailableObject(),this.previewURL="",void 0!==config.validate&&(this.availableObjectValidate=config.validate),data.configuratorMode=this.configuratorMode,void 0===data.object)return!1;if(siteManager.layoutmanager&&(data.layoutmanager=!0),"backEnd"==this.configuratorMode){siteManager.layoutmanager&&(configOptions=$.extend({},data),configOptions.params=configOptions.params||{}),this.resetConfiguratorContainer();var originid=data.objectid;$("#configuratorContainer").dialog({resizable:!0,modal:!0,width:600,position:getDialogPosition(),buttons:{Save:function Save(){siteManager.updateAvailableObject();var availableObjectSelector=$("#availableObjectSelector");if(availableObjectSelector.length){var selectedObject=eval("("+availableObjectSelector.val()+")");siteManager.availableObject.name=selectedObject.name,siteManager.availableObject.object=selectedObject.object,siteManager.availableObject.objectid=selectedObject.objectid,siteManager.availableObject.originid=originid,delete selectedObject.name,delete selectedObject.object,delete selectedObject.objectid,$.extend(siteManager.availableObject.params,selectedObject)}if(siteManager.availableObjectValidate(siteManager.availableObject.params)){for(var p in void 0!==config.destroy&&config.destroy(data,config),$(this).dialog("destroy"),siteManager.availableObject)"function"==typeof siteManager.availableObject[p]&&delete siteManager.availableObject[p];configure="none"!=siteManager.availableObject.objectid&&originid!=siteManager.availableObject.objectid&&siteManager.getPluginConfigurator(siteManager.availableObject.objectid),siteManager.addDisplayObject(siteManager.availableObject,data.regionid,configure,!0)}},Cancel:function(){void 0!==config.destroy&&config.destroy(data,config),$(this).dialog("destroy")}},close:function(){void 0!==config.destroy&&config.destroy(data,config),$(this).dialog("destroy")}});var url=config.url+"?"+config.pars+"&contenttype="+document.contentForm.type.value+"&contentsubtype="+document.contentForm.subtype.value}else var url=config.url+"?"+config.pars;return $.ajax({url:url,dataType:"text",data:data,type:"post",success:function(t){var e=t;if("string"==typeof e)try{e=JSON.parse.call(null,Mura.trim(t))}catch(n){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),e=t}if("object"==_typeof(e)?$("#configurator").html(e.html):"xml"==typeof e?$("#configurator").html(e.toString()):$("#configurator").html(e),$(".form-actions").show(),niceSelects=$(".mura #configurator select"),niceSelects.niceSelect&&niceSelects.each((function(){var t=$(this);(void 0===t.data("niceselect")||t.data("niceselect"))&&(t.attr("name")&&t.addClass("ns-"+t.attr("name")),t.niceSelect())})),"frontEnd"==siteManager.configuratorMode?(setTimeout((function(){wireupExterndalUIWidgets(),$(".mura-html:not(textarea").each((function(){var t=$(this);t.click((function(){siteManager.openDisplayObjectModal("object/html.cfm",t.data())}))})),$(".mura-markdown:not(textarea").each((function(){var t=$(this);t.click((function(){siteManager.openDisplayObjectModal("object/markdown.cfm",t.data())}))})),$(".mura-associmage").each((function(){var t=$(this);t.click((function(){siteManager.openDisplayObjectModal("object/associmage.cfm",t.data())}))}))}),1),config.title.indexOf("<i class=")>-1?$("#configuratorHeader").html(config.title):(config.iconclass=config.iconclass||"mi-cog",$("#configuratorHeader").html('<i class="'+config.iconclass+'"></i> '+config.title))):$("#configuratorContainer").dialog("option","title",config.title),""==siteManager.availableObjectTemplate){var n=$("#availableObjectParams");siteManager.availableObjectTemplate={object:n.attr("data-object"),objectid:n.attr("data-objectid"),name:n.attr("data-name")},siteManager.availableObjectTemplate.object=siteManager.availableObjectTemplate.object||data.object,siteManager.availableObjectTemplate.objectid=siteManager.availableObjectTemplate.objectid||data.objectid,siteManager.availableObjectTemplate.name=siteManager.availableObjectTemplate.name||data.name,siteManager.availableObject=$.extend({},siteManager.availableObjectTemplate)}void 0!==config.init&&("object"==_typeof(e)&&(data=$.extend(data,e)),config.init(data,config)),siteManager.layoutmanager?(setTabs(),siteManager.updateAvailableObject()):siteManager.updateAvailableObject(),"backEnd"==siteManager.configuratorMode?$("#configuratorContainer").dialog("option","position",getDialogPosition()):"frontEnd"==siteManager.configuratorMode&&($("#actionButtons").show(),$("#configuratorNotices").show()),window.configuratorInited=!1}}),!0},getPluginConfigurator:function(t){for(var e=0;e<pluginConfigurators.length;e++)if(pluginConfigurators[e].objectid==t)return pluginConfigurators[e].init;return""},openContentDiff:function(t,e,n){return $("#contentDiffContainer").remove(),$("body").append('<div id="contentDiffContainer" title="Loading..." style="display:none"><div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div></div>'),$("#contentDiffContainer .load-inline").spin(spinnerArgs2),$("#contentDiffContainer").dialog({resizable:!1,modal:!0,width:990,title:"Version History Comparison: Code & Attribute Diff",position:getDialogPosition(),open:function(){$("#contentDiffContainer").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>');var i="muraAction=cArch.loaddiff&compactDisplay=true&siteid="+n+"&contenthistid1="+t+"&contenthistid2="+e+"&cacheid="+Math.random();$.ajax("./index.cfm?"+i).done((function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#contentDiffContainer .load-inline").spin(!1),$("#contentDiffContainer").html(t),$("#contentDiffContainer").dialog("option","position","center"),$(".ui-widget-overlay").css("height",$(document).height())})).fail((function(t){-1!=t.responseText.indexOf("mura-primary-login-token")&&(location.href="./"),$("#contentDiffContainer .load-inline").spin(!1),$("#contentDiffContainer").html(t.responseText),$("#contentDiffContainer").dialog("option","position","center")}))},close:function(){$(this).dialog("destroy"),$("#contentDiffContainer").remove()}}),!1},openDisplayObjectModal:function(t,e){e=e||{};var n=Mura.getQueryStringParams(location.search);Mura.deepExtend(Mura.setLowerCaseKeys(n),Mura.setLowerCaseKeys(e)),n.sourceframe="modal",n.muraaction="carch.displayobjectmodal",n.view=t;var i="?";for(var a in n)i=i+"&"+a+"="+encodeURIComponent(n[a]);i=i+"&cacheid="+Math.random(),frontEndProxy.post({cmd:"openModal",src:i})},setDisplayObjectModalWidth:function(t){t=t||"standard",$((function(){$("#ProxyIFrame").length?$("#ProxyIFrame").load((function(){frontEndProxy.post({cmd:"setWidth",width:t})})):frontEndProxy.post({cmd:"setWidth",width:t})}))},updateDisplayObjectParams:function(t,e){t=t||{},e=void 0===e||e;var n=Mura.setLowerCaseKeys(Mura.getQueryStringParams(location.search));t=e?Mura.extend({},siteManager.availableObject.params,t):Mura.extend({},t),$((function(){$("#ProxyIFrame").length?$("#ProxyIFrame").load((function(){frontEndProxy.post({cmd:"setObjectParams",reinit:"sidebar"!=n.sourceframe,instanceid:n.instanceid,params:t,complete:e})})):frontEndProxy.post({cmd:"setObjectParams",reinit:"sidebar"!=n.sourceframe,instanceid:n.instanceid,params:t,complete:e})}))},requestDisplayObjectParams:function(t,e,n){e=e||"modal";var i=t;siteManager.frontEndProxyListeners.push({cmd:"customObjectParamsRequest",fn:function(t){n?(siteManager.initConfiguratorParams(),i(t)):($(".objectParam, .objectparam").each((function(){var e=$(this);if("string"==typeof e.attr("name")){var n=e.attr("name").toLowerCase();void 0!==t[n]&&(e.is(":radio")?e.val().toString()==t[n].toString()&&e.attr("checked",!0):("object"==_typeof(t[n])?e.val(JSON.stringify(t[n])):e.val(t[n].toString()),e.is("SELECT")&&e.niceSelect("update"),"undefined"!=typeof CKEDITOR&&e.attr("id")&&void 0!==CKEDITOR.instances[e.attr("id")]&&CKEDITOR.instances[e.attr("id")].setData(e.val())))}})),siteManager.initConfiguratorParams(),i(t))}});var a=Mura.getQueryStringParams(location.search);$((function(){$("#ProxyIFrame").length?$("#ProxyIFrame").load((function(){frontEndProxy.post({cmd:"requestObjectParams",instanceid:a.instanceid,targetFrame:e,callback:"customObjectParamsRequest"})})):frontEndProxy.post({cmd:"requestObjectParams",instanceid:a.instanceid,targetFrame:e,callback:"customObjectParamsRequest"})}))},requestCustomConfigurator:function(t,e){var n=e;siteManager.frontEndProxyListeners.push({cmd:"customObjectConfiguratorRequest",target:t,fn:function(t){n(t)}});var i=Mura.getQueryStringParams(location.search);$((function(){$("#ProxyIFrame").length?$("#ProxyIFrame").load((function(){frontEndProxy.post({cmd:"requestObjectConfigurator",instanceid:i.instanceid,target:t,callback:"customObjectConfiguratorRequest"})})):frontEndProxy.post({cmd:"requestObjectConfigurator",instanceid:i.instanceid,target:t,callback:"customObjectConfiguratorRequest"})}))},frontEndProxyListener:function(t){for(var e=t.data,n=siteManager.frontEndProxyListeners,i=0;i<n.length;i++)n[i].cmd==e.cmd&&(e.params?n[i].fn(e.params):n[i].fn(e),n[i].cmd="void")},frontEndProxyListeners:[]},quickEditTmpl='<div class="mura-quickEdit" id="mura-quickEditor">',quickEditTmpl+='<img class="loader" src="assets/images/ajax-loader-alt.gif" />',quickEditTmpl+="</div>",$(document).ready((function(){siteManager.initDisplayObjectConfigurators()}))},function(t,e){categoryManager={DHTML:document.getElementById||document.all||document.layers,lastid:"",getObj:function(t){document.getElementById?(this.obj=document.getElementById(t),this.style=document.getElementById(t).style):document.all?(this.obj=document.all[t],this.style=document.all[t].style):document.layers&&(this.obj=document.layers[t],this.style=document.layers[t])},showMenu:function(t,e,n,i){if(window.innerHeight)window.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)document.documentElement.scrollTop;else if(document.body)document.body.scrollTop;if(window.innerWidth)window.pageXOffset;else if(document.documentElement&&document.documentElement.scrollLeft)document.documentElement.scrollLeft;else if(document.body)document.body.scrollLeft;var a=this.findPosX(e),o=this.findPosY(e);a-=10,document.getElementById(t).style.top=o+"px",document.getElementById(t).style.left=a+"px",$("#"+t).removeClass("hide"),document.getElementById("newCategoryLink").href="./?muraAction=cCategory.edit&parentid="+n+"&siteid="+i;for(var r,s=e.parentNode.parentNode.getElementsByClassName("actions")[0].getElementsByTagName("ul")[0].getElementsByTagName("li"),c=document.getElementById("newCategoryOptions"),l=c.getElementsByClassName("li-action");r=l[0];)r.parentNode.removeChild(r);for(var d=document.getElementById("newPage"),u=0;u<s.length;u++)if(s[u].className.indexOf("disabled")<0){var m=document.createElement("li");m.innerHTML=s[u].innerHTML;var f=m.getElementsByTagName("a")[0],g=f.getAttribute("title");m.className="li-action "+g.toLowerCase(),f.removeAttribute("title"),f.innerHTML=f.innerHTML+g,"edit"==g.toLowerCase()?c.insertBefore(m,d.nextSibling):c.appendChild(m)}""!=this.lastid&&this.lastid!=t&&this.hideMenu(this.lastid),this.lastid=t},findPosX:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetLeft,t=t.offsetParent;else t.x&&(e+=t.x);return e},findPosY:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetTop,t=t.offsetParent;else t.y&&(e+=t.y);return e},keepMenu:function(t){$("#"+t).removeClass("hide")},hideMenu:function(t){$("#"+t).addClass("hide")}}},function(t,e){commentManager={reload:!1,loadSearch:function(t){var e="muraAction=cComments.loadComments&siteid="+siteid+"&"+t+"&cacheid="+Math.random();commentManager.reload=!1,$("#commentSearch").html('<div class="load-inline"></div>'),$("#commentSearch .load-inline").spin(spinnerArgs2),$.get("./?"+e,(function(t){$("#commentSearch").html(t),setDatePickers(".mura-custom-datepicker",dtLocale,dtCh),setCheckboxTrees(),$("#advancedSearch").find("ul.categories:not(.checkboxTrees)").css("margin-left","10px"),commentManager.bindEvents()}))},bulkEdit:function(){var t=$("#frmUpdate").serialize(),e="muraAction=cComments.bulkEdit&siteid="+siteid+"&"+t+"&cacheid="+Math.random();$.get("./?"+e,(function(){commentManager.submitSearch()}))},singleEdit:function(t,e){var n="muraAction=cComments.singleEdit&siteid="+siteid+"&commentid="+t+"&updateaction="+e+"&cacheid="+Math.random();commentManager.reload=!0,$.get("./?"+n,(function(){$(".modal").modal("hide")}))},submitSearch:function(){commentManager.loadSearch($("#commentSearch input, #commentSearch select").serialize())},setSort:function(t){$("#sortBy").val(t.attr("data-sortby")),$("#sortDirection").val(t.attr("data-sortdirection")),commentManager.submitSearch()},setNextN:function(t){$("#nextN").val(t.attr("data-nextn")),commentManager.submitSearch()},setPageNo:function(t){$("#pageNo").val(t.attr("data-pageno")),commentManager.submitSearch()},bindEvents:function(){$("#btnSearch").click((function(t){t.preventDefault(),commentManager.submitSearch()})),$("#frmSearch").submit((function(t){t.preventDefault(),commentManager.submitSearch()})),$("a.sort").click((function(t){t.preventDefault(),commentManager.setSort($(this))})),$("a.nextN").click((function(t){t.preventDefault(),commentManager.setNextN($(this))})),$("a.pageNo").click((function(t){t.preventDefault(),commentManager.setPageNo($(this))})),$("#checkall").click((function(t){t.preventDefault();var e=$(":checkbox.checkall");e.prop("checked",!e.prop("checked"))})),$("a.bulkEdit").click((function(t){t.preventDefault();var e=$(this);confirmDialog(e.attr("data-alertmessage"),(function(){$("#bulkedit").val(e.attr("data-action")),commentManager.bulkEdit()}))})),$("a#purge-comments").click((function(t){t.preventDefault();var e=$(this);console.log("request to purge"),confirmDialog(e.attr("data-alertmessage"),(function(){console.log("purge approved"),actionModal((function(){commentManager.purgeDeletedComments()}))}))})),$("a.singleEdit").click((function(t){t.preventDefault();var e=$(this);commentManager.singleEdit(e.attr("data-commentid"),e.attr("data-action"))})),$(".modal").on("show.bs.modal",(function(){var t=$(this),e={contentID:t.attr("data-contentid"),commentID:t.attr("data-commentid")};t.find("div.modal-body").html('<div class="load-inline"></div>'),t.find("div.modal-body .load-inline").spin(spinnerArgs2),commentManager.loadPage(e).then((function(e){t.find("div.modal-body").html(e);var n=$("#detail-"+t.attr("data-commentid"));n.fadeIn(),t.find("div.modal-body").animate({scrollTop:n.position().top},"slow"),commentManager.bindAjaxEvents(t)}))})),$(".modal").on("hidden.bs.modal",(function(){if(commentManager.reload)commentManager.submitSearch();else{var t=$(this);t.find("#commentsPage").remove(),t.find("div.modal-body").html('<div class="load-inline"></div>'),t.find("div.modal-body .load-inline").spin(spinnerArgs2)}}))},bindAjaxEvents:function(t){t.find("#moreCommentsUp").unbind("click").on("click",(function(e){e.preventDefault();var n={contentID:t.attr("data-contentid"),upperID:$(this).attr("data-upperid")};commentManager.loadPage(n).then((function(e){t.find("#moreCommentsUpContainer").remove(),$(e).prependTo(t.find("#commentsPage")).hide().fadeIn(),commentManager.bindAjaxEvents(t)}))})),t.find("#moreCommentsDown").unbind("click").on("click",(function(e){e.preventDefault();var n={contentID:t.attr("data-contentid"),lowerID:$(this).attr("data-lowerid")};commentManager.loadPage(n).then((function(e){t.find("#moreCommentsDownContainer").remove(),$(e).appendTo(t.find("#commentsPage")).hide().fadeIn(),commentManager.bindAjaxEvents(t)}))})),t.find(".inReplyTo").on("click",(function(e){e.preventDefault();var n=$(this).attr("data-parentid");if($("#detail-"+n).length)commentManager.scrollToID($("#detail-"+n));else{var i={contentID:t.attr("data-contentid"),upperID:$(this).attr("data-parentid")};commentManager.loadPage(i).then((function(e){t.find("#moreCommentsUpContainer").remove(),$(e).prependTo(t.find("#commentsPage")).hide().fadeIn(),commentManager.bindAjaxEvents(t),commentManager.scrollToID($("#detail-"+n))}))}}))},scrollToID:function(t){$("html, body").animate({scrollTop:t.offset().top-50},500,(function(){t.fadeTo("fast",.5,(function(){t.fadeTo("fast",1)}))}))},loadPage:function(t){var e={muraAction:"ccomments.loadcommentspage",sortDirection:"asc",siteid:siteid};return $.extend(e,t),$.ajax({url:"./",data:e,cache:!1})},purgeDeletedComments:function(){var t="muraAction=cComments.purgeDeletedComments&siteid="+siteid+"&cacheid="+Math.random();$.get("./?"+t,(function(){$("#action-modal").remove(),commentManager.submitSearch()}))}}},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a,o,r=n(1);loadObject=function(t,e,n){var i,a=e;processReqChange=function(){4==i.readyState&&200==i.status&&(document.getElementById(a).innerHTML=i.responseText)},document.getElementById(a).innerHTML=n,window.XMLHttpRequest?((i=new XMLHttpRequest).onreadystatechange=processReqChange,i.open("GET",t,!0),i.send(null)):window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLHTTP"))&&(i.onreadystatechange=processReqChange,i.open("GET",t,!0),i.send())},dtCh="/",minYear=1800,maxYear=2200,dtFormat=[0,1,2],dtExample="12/31/2016",isInteger=function(t){var e;for(e=0;e<t.length;e++){var n=t.charAt(e);if(n<"0"||"9"<n)return!1}return!0},stripCharsInBag=function(t,e){var n,i="";for(n=0;n<t.length;n++){var a=t.charAt(n);-1==e.indexOf(a)&&(i+=a)}return i},daysInFebruary=function(t){return t%4!=0||t%100==0&&t%400!=0?28:29},DaysArray=function(t){for(var e=1;e<=t;e++)this[e]=31,4!=e&&6!=e&&9!=e&&11!=e||(this[e]=30),2==e&&(this[e]=29);return this},parseDateTimeSelector=function(t){if(isDate($(".datepicker.mura-datepicker"+t).val())){var e=$(".datepicker.mura-datepicker"+t).val(),n=(DaysArray(12),e.split(dtCh)),i=n[dtFormat[0]],a=n[dtFormat[1]],o=n[dtFormat[2]],r=$("#mura-"+t+"Minute").length?$("#mura-"+t+"Minute").val():0,s=$("#mura-"+t+"Hour").length?$("#mura-"+t+"Hour").val():0;$("#mura-"+t+"DayPart").length&&("pm"==$("#mura-"+t+"DayPart").val().toLowerCase()?24==(s=parseInt(s)+12)&&(s=12):12==parseInt(s)&&(s=0)),1==s.length&&(s="0"+s),1==r.length&&(r="0"+r);var c="{ts '"+o+"-"+i+"-"+a+" "+s+":"+r+":00'}";$("#mura-"+t).val(c)}else $("#mura-"+t).val("")},isDate=function(t){var e=DaysArray(12),n=t.split(dtCh);if(3!=n.length)return!1;var i=n[dtFormat[0]],a=n[dtFormat[1]],o=n[dtFormat[2]];strYr=o,"0"==a.charAt(0)&&1<a.length&&(a=a.substring(1)),"0"==i.charAt(0)&&1<i.length&&(i=i.substring(1));for(var r=1;r<=3;r++)"0"==strYr.charAt(0)&&1<strYr.length&&(strYr=strYr.substring(1));return month=parseInt(i),day=parseInt(a),year=parseInt(strYr),!(month<1||12<month||day<1||31<day||2==month&&day>daysInFebruary(year)||day>e[month]||4!=o.length||0==year||year<minYear||year>maxYear||0==isInteger(stripCharsInBag(t,dtCh)))},isEmail=function(t){return/^[a-zA-Z_0-9-'\+~]+(\.[a-zA-Z_0-9-'\+~]+)*@([a-zA-Z_0-9-]+\.)+[a-zA-Z]{2,8}$/.test(t)},isColor=function(t){var e,n=0,i=t.replace(/ +/g,"").match(/(rgba?)|(\d+(\.\d+)?%?)|(\.\d+)/g);if(i&&3<i.length){for(;n<3;){if((e=-1!=(e=i[++n]).indexOf("%")?Math.round(2.55*parseFloat(e)):parseInt(e))<0||255<e)return NaN;i[n]=e}if(0===t.indexOf("rgba")){if(null==i[4]||i[4]<0||1<i[4])return NaN}else if(i[4])return NaN;return i[0]+"("+i.slice(1).join(",")+")"}return NaN},isURL=function(t){return urlPattern=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/,t.match(urlPattern)},stripe=function(t){$("table."+t+" tr").each((function(t){t%2?$(this).addClass("alt"):$(this).removeClass("alt")})),$("div.mura-grid."+t+" dl").each((function(t){t%2?$(this).addClass("alt"):$(this).removeClass("alt")}))},toggleDisplay=function(t,e,n){"none"==document.getElementById(t).style.display?(document.getElementById(t).style.display="",document.getElementById(t+"Link")&&(document.getElementById(t+"Link").innerHTML="["+n+"]")):(document.getElementById(t).style.display="none",document.getElementById(t+"Link")&&(document.getElementById(t+"Link").innerHTML="["+e+"]"))},openDisplay=function(t,e){"none"==document.getElementById(t).style.display&&($("#"+t).slideDown(),"editAdditionalTitles"==t&&$("#alertTitleSuccess").hide(),document.getElementById(t+"Link")&&(document.getElementById(t+"Link").innerHTML="["+e+"]"),document.getElementById(t).style.display="")},toggleDisplay2=function(t,e){document.getElementById(t).style.display=1==e?"":"none"},validate=function(t){return validateForm(t)},getValidationFieldName=function(t){return null!=t.getAttribute("data-label")?t.getAttribute("data-label"):null!=t.getAttribute("label")?t.getAttribute("label"):t.getAttribute("name")},getValidationIsRequired=function(t){return null!=t.getAttribute("data-required")?"true"==t.getAttribute("data-required").toLowerCase():null!=t.getAttribute("required")&&"true"==t.getAttribute("required").toLowerCase()},getValidationMessage=function(t,e){return null!=t.getAttribute("data-message")?t.getAttribute("data-message")+"<br/>":null!=t.getAttribute("message")?t.getAttribute("message")+"<br/>":getValidationFieldName(t).toUpperCase()+e+"<br/>"},getValidationType=function(t){return null!=t.getAttribute("data-validate")?t.getAttribute("data-validate").toUpperCase():null!=t.getAttribute("validate")?t.getAttribute("validate").toUpperCase():""},hasValidationMatchField=function(t){return null!=t.getAttribute("data-matchfield")&&""!=t.getAttribute("data-matchfield")||null!=t.getAttribute("matchfield")&&""!=t.getAttribute("matchfield")},getValidationMatchField=function(t){return null!=t.getAttribute("data-matchfield")?t.getAttribute("data-matchfield"):null!=t.getAttribute("matchfield")?t.getAttribute("matchfield"):""},hasValidationRegex=function(t){return null!=t.value&&(null!=t.getAttribute("data-regex")&&""!=t.getAttribute("data-regex")||null!=t.getAttribute("regex")&&""!=t.getAttribute("regex")||void 0)},getValidationRegex=function(t){return null!=t.getAttribute("data-regex")?t.getAttribute("data-regex"):null!=t.getAttribute("regex")?t.getAttribute("regex"):""},validateForm=function(t){var e,n,i="",a=!1,o="",r=t.getElementsByTagName("input");for(f=0;f<r.length;f++)if(theField=r[f],o=getValidationType(theField),""==theField.style.display)if(getValidationIsRequired(theField)&&""==theField.value)a||(a=!0,e=f,n="input"),i+=getValidationMessage(theField," is required.");else if(""!=o)if("EMAIL"!=o||""==theField.value||isEmail(theField.value))if("NUMERIC"==o&&""!=theField.value&&isNaN(theField.value))isNaN(theField.value.replace(/\$|\,|\%/g,""))?(a||(a=!0,e=f,n="input"),i+=getValidationMessage(theField," must be numeric.")):theField.value=theField.value.replace(/\$|\,|\%/g,"");else if("COLOR"==o&&""!=theField.value)isColor(theField.value)||(a||(a=!0,e=f,n="input"),i+=getValidationMessage(theField," is not a valid color."));else if("URL"==o&&""!=theField.value)isURL(theField.value)||(a||(a=!0,e=f,n="input"),i+=getValidationMessage(theField," is not a valid URL."));else if("REGEX"==o&&""!=theField.value&&hasValidationRegex(theField)){var s=new RegExp(getValidationRegex(theField));theField.value.match(s)||(a||(a=!0,e=f,n="input"),i+=getValidationMessage(theField," is not valid."))}else"MATCH"==o&&hasValidationMatchField(theField)&&theField.value!=t[getValidationMatchField(theField)].value?(a||(a=!0,e=f,n="input"),i+=getValidationMessage(theField," must match"+getValidationMatchField(theField)+".")):"DATE"!=o&&"DATETIME"!=o||""==theField.value||isDate(theField.value)||(a||(a=!0,e=f,n="input"),i+=getValidationMessage(theField," must be a valid date [MM/DD/YYYY]."));else a||(a=!0,e=f,n="input"),i+=getValidationMessage(theField," must be a valid email address.");var c=t.getElementsByTagName("textarea");for(f=0;f<c.length;f++)theField=c[f],o=getValidationType(theField),""==theField.style.display&&getValidationIsRequired(theField)&&""==theField.value?(a||(a=!0,e=f,n="textarea"),i+=getValidationMessage(theField," is required.")):""!=o&&"REGEX"==o&&""!=theField.value&&hasValidationRegex(theField)&&(s=new RegExp(getValidationRegex(theField)),theField.value.match(s)||(a||(a=!0,e=f,n="input"),i+=getValidationMessage(theField," is not valid.")));var l=t.getElementsByTagName("select");for(f=0;f<l.length;f++)theField=l[f],o=getValidationType(theField),""==theField.style.display&&getValidationIsRequired(theField)&&""==theField.options[theField.selectedIndex].value&&(a||(a=!0,e=f,n="select"),i+=getValidationMessage(theField," is required."));return""==i||("input"==n?r[e].focus():"textarea"==n?c[e].focus():"select"==n&&l[e].focus(),$("#alertDialogMessage").html(i),$("#alertDialog").attr("title","Alert"),$("#alertDialog").dialog({resizable:!1,modal:!0,position:getDialogPosition(),buttons:{Ok:{click:function(){$(this).dialog("close"),"input"==n?r[e].focus():"textarea"==n?c[e].focus():"select"==n&&l[e].focus()},text:"OK",class:"mura-primary"}}}),!1)},submitForm=function(t,e,n){var i=n,a=t;if(validateForm(t)){if(void 0!==e&&"delete"!=e){var o=t.getElementsByTagName("input");for(f=0;f<o.length;f++)"action"==o[f].getAttribute("name")&&o[f].setAttribute("value",e)}else if("delete"==e)return $("#alertDialogMessage").html(i),$("#alertDialog").dialog({modal:!0,position:getDialogPosition(),resizable:!1,dialogClass:"dialog-warning",width:400,buttons:{Yes:{click:function(){$(this).dialog("close");var t=a.getElementsByTagName("input");for(f=0;f<t.length;f++)"action"==t[f].getAttribute("name")&&t[f].setAttribute("value",e);a.submit()},text:"Yes",class:"mura-primary"},No:function(){$(this).dialog("close")}}}),!1;if("undefined"!=typeof CKEDITOR)for(var r in CKEDITOR.instances)void 0!==CKEDITOR.instances[r]&&null!=CKEDITOR.instances[r]&&$("#"+r).length&&CKEDITOR.instances[r].updateElement();actionModal((function(){t.submit(),formSubmitted=!0}))}return!1},testEmail=function(t){t.preventDefault();$("#emailTestDialog").remove(),$("body").append('<div id="emailTestDialog" title="Loading..." style="display:none"></div>');var e={};e.mailSmtpPort=$('input[name="MailServerSMTPPort"]').val(),e.mailHost=$('input[name="MailServerIP"]').val(),e.mailUsername=$('input[name="MailServerUserName"]').val(),e.mailPassword=$('input[name="MailServerPassword"]').val(),e.mailUseTLS=$('input[name="mailServerTLS"]:checked').val(),e.mailUseSSL=$('input[name="mailServerSSL"]:checked').val();$("#emailTestDialog").dialog({resizable:!1,modal:!0,title:"Testing Email Connection",width:400,position:getDialogPosition(),open:function(){$("#emailTestDialog").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>'),$("#emailTestDialog .load-inline").spin(spinnerArgs2),$.post("index.cfm?muraAction=cArch.emailTest&compactDisplay=true",e,(function(t){$("#emailTestDialog .load-inline").spin(!1),$("#emailTestDialog").html(t)})).fail((function(t){$("#emailTestDialog .load-inline").spin(!1),$("#emailTestDialog").html(t.responseText)}))},close:function(){$(this).dialog("destroy"),$("#emailTestDialog").remove()}})},actionModal=function(t){return $("body").append('<div id="action-modal" class="modal-backdrop fade in"></div>'),$("#action-modal").spin(spinnerArgs),t&&("string"==typeof t?location.href=t:t()),!1},preview=function(t,e){return newWindow=""==e?window.open(t,"previewWin"):window.open(t,"previewWin",e),!newWindow||newWindow.closed||void 0===newWindow.closed?alertDialog("pop-up window has been blocked for this site,Disable blocking pop-up windows to see the Site Preview"):newWindow.focus(),!1},createCookie=function(t,e,n){if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var a="; expires="+i.toGMTString()}else a="";"undefined"!=typeof location&&"https:"==location.protocol?secure="; secure;samesite=None;":secure="",document.cookie=t+"="+e+a+"; path=/"+secure+";"},readCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return unescape(a.substring(e.length,a.length))}return""},eraseCookie=function(t){createCookie(t,"",-1)},newWindow=null,markdownInstances={},codeInstances={},setMarkdownEditors=function(t){r(t=t||"textarea.mura-markdown, textarea.markdownEditor").forEach((function(){var t=r(this);if(!t.hasClass("markdown-lazy-init")||t.parent(".extenset-container[id*='primary'").length>0){t.hide();var e="mura-markdown-"+t.attr("name");if(void 0===markdownInstances[t.attr("name")]){t.after('<div class="mura-markdown-editor" id="'+e+'" data-target="'+t.attr("name")+'"></div>');var n=t.data("height")||"300px",i=t.data("previewstyle")||"tabs",a=t.data("initialedittype")||"wysiwyg";markdownInstances[t.attr("name")]=getMarkdownEditor({el:document.getElementById(e),initialEditType:a,previewStyle:i,height:n,initialValue:t.val()})}}}))},HTMLEditorLoadCount=0,setHTMLEditors=function(t){"undefined"!=typeof CKEDITOR&&r(t=t||"textarea.mura-html, textarea.htmlEditor").forEach((function(){var t=r(this);if(!t.attr("mura-inprocess")){t.attr("mura-inprocess","true");var e=CKEDITOR.instances[t.attr("id")];void 0!==e&&null!=e&&CKEDITOR.remove(e),""==t.val()&&t.val("<p></p>");var n=t.data("toolbar")||"Default";$(t.node).ckeditor({toolbar:n,height:t.data("height"),customConfig:"config.js.cfm?cacheid="+Math.random()},htmlEditorOnComplete)}}))},htmlEditorOnComplete=function(t){$(t).ckeditorGet().resetDirty();var e=CKEDITOR.instances;HTMLEditorLoadCount++;var n=0;for(k in e)n++;try{var i=document.getElementById("actionButtons");i.length&&(i.style.display=n<=HTMLEditorLoadCount?"block":"none")}catch(t){}},setDatePickers=function(t,e,n){if(null==$.datepicker.regional[e])var i=e.substring(0,2);else i=e;null!=$.datepicker.regional[i]?$(t).each((function(t){$(this).datepicker($.datepicker.regional[i]).datepicker("option","changeYear",!0).datepicker("option","changeMonth",!0)})):$(t).each((function(t){$(this).datepicker($.datepicker.regional[""]).datepicker("option","changeYear",!0).datepicker("option","changeMonth",!0)})),$(t).each((function(t){"mura-datepicker-displayStart"==$(this).attr("id")&&""==$(this).val()&&$(this).datepicker("setDate",new Date)}))},setColorPickers=function(t){var e={},n=!1;if("undefined"!=typeof themeColorOptions&&Array.isArray(themeColorOptions)&&themeColorOptions.length){for(var i=0;i<themeColorOptions.length;i++)void 0!==themeColorOptions[i].value?e[themeColorOptions[i].value]=themeColorOptions[i].value:e[themeColorOptions[i].VALUE]=themeColorOptions[i].VALUE;n=!0}$(t).each((function(t){n?$(this).colorpicker({align:"left",colorSelectors:e}):$(this).colorpicker({align:"left"})}))},setToolTips=function(t){"function"==typeof $(t).tooltip&&$(t).tooltip({selector:"a[rel=tooltip]"}),$(t+" a[rel=tooltip]").click((function(t){return t.preventDefault(),!1})),"function"==typeof $(t).popover&&$(t+' [data-toggle="popover"]').popover("destroy").popover({trigger:"hover",html:!0})},setTabs=function(t,e){if($(".tab-preloader").spin(spinnerArgs2),$(t+" a").click((function(t){t.preventDefault(),$(this).tab("show")})),""!=window.location.hash)$(t+' a[href="'+window.location.hash+'"]').tab("show"),window.setTimeout((function(){$("a span.display-tab").html('<i class="mi-chevron-down"></i>')}),1);else if(void 0!==e)try{$(t+" li::nth-child("+(e+1)+") a").tab("show")}catch(e){$(t+" li:first a").tab&&$(t+" li:first a").tab("show")}else $(t+" li:first a").tab("show");$(".tab-preloader").hide().spin(!1)},setAccordions=function(t,e){$(t).each((function(t){null!=e?$(this).accordion({active:e}):$(this).accordion()}))},setCheckboxTrees=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];$(".checkboxTree").each((function(){$(this).collapsibleCheckboxTree({checkParents:t,checkChildren:e,uncheckChildren:n,initialState:i,hideChildren:a})}))},setCodeEditors=function(t){var e=r(t=t||"textarea.mura-code, textarea.markdownEditor");e.length&&r.loader().loadcss(r.rootpath+"/core/vendor/codemirror/codemirror.css").loadjs(r.rootpath+"/core/vendor/codemirror/codemirror.js",r.rootpath+"/core/vendor/codemirror/autorefresh.js",r.rootpath+"/core/vendor/codemirror/mode/javascript/javascript.js",r.rootpath+"/core/vendor/codemirror/mode/css/css.js",r.rootpath+"/core/vendor/codemirror/mode/xml/xml.js",r.rootpath+"/core/vendor/codemirror/mode/htmlmixed/htmlmixed.js",(function(){e.forEach((function(){var t=r(this);codeInstances[t.attr("name")]=CodeMirror.fromTextArea(this,r.extend({mode:"htmlmixed",lineNumbers:!0,theme:"default",autoRefresh:!0},r(this).data())),setTimeout((function(){void 0!==codeInstances[t.attr("name")]?codeInstances[t.attr("name")].refresh():console.log("codemirror missing for refresh")}),0);codeInstances[t.attr("name")].on("change",(function(){void 0!==codeInstances[t.attr("name")]?(t.val(codeInstances[t.attr("name")].getValue()),t.trigger("change")):console.log("codemirror missing for update")}))}))}))},openFileMetaData=function(t,e,n,i){try{"undefined"==typeof fileMetaDataAssign&&(fileMetaDataAssign={}),$("#newFileMetaContainer").remove(),$("body").append('<div id="newFileMetaContainer" title="Loading..." style="display:none"><div id="newFileMeta"><div class="load-inline"></div></div></div>');var a=$.ui.dialog.prototype._focusTabbable;$.ui.dialog.prototype._focusTabbable=function(){},$("#newFileMetaContainer").dialog({resizable:!1,modal:!0,width:600,title:"Edit Image Properties",position:getDialogPosition(),buttons:{Cancel:function(){$(this).dialog("close")},Save:{click:function(){var t={exifpartial:{}};$(".filemeta").each((function(){t[$(this).attr("data-property")]=$(this).val()})),$(".exif").each((function(){t.exifpartial[$(this).attr("data-property")]=$(this).val()})),t.setasdefault=$("#filemeta-setasdefault").is(":checked"),fileMetaDataAssign[i]=t,$("#filemetadataassign").val(JSON.stringify(fileMetaDataAssign)),$(this).dialog("close")},text:"Save",class:"mura-primary"}},open:function(){$(".ui-widget-overlay").css("z-index",500),$(".ui-dialog").css("z-index",501),$("#newFileMetaContainer").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>');var a="muraAction=cArch.loadfilemetadata&fileid="+e+"&property="+i+"&contenthistid="+t+"&siteid="+n+"&cacheid="+Math.random();$("#newFileMetaContainer .load-inline").spin(spinnerArgs2),r.get("index.cfm?"+a).then((function(t){if(-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#newFileMetaContainer .load-inline").spin(!1),$("#newFileMetaContainer").html(t),i in fileMetaDataAssign){var e=fileMetaDataAssign[i];for(var n in e)$('.filemeta[data-property="'+n+'"]').val(e[n]);$("#filemeta-setasdefault").prop("checked",e.setasdefault)}$("#newFileMetaContainer .htmlEditor").ckeditor({toolbar:"Basic",height:100,customConfig:"config.js.cfm"},htmlEditorOnComplete),setMarkdownEditors(),setTabs("#newFileMetaContainer.tabs",0),setDatePickers(".datepicker, mura-datepicker",dtLocale),$("#newFileMetaContainer").dialog("option","position",getDialogPosition()),$(".filemeta:first").focus()}),(function(t){$("#newFileMetaContainer").html(t.responseText),$("#newFileMetaContainer").dialog("option","position",getDialogPosition())}))},close:function(){$(this).dialog("destroy"),$("#newFileMetaContainer").remove(),$.ui.dialog.prototype._focusTabbable=a}})}catch(a){console.log(a)}return!1},setFileSelectors=function(){$(".mura-file-selector").fileselector()},alertDialog=function(t,e,n,a,o){if(a=a||450,"object"==i(t)){var r=t;t=r.message||"Message not defined",e=r.okAction||function(){},n=r.title||"Alert",a=r.width||0}n=n||"Alert";var s={dialogClass:o=o||"dialog-warning",resizable:!1,modal:!0,position:getDialogPosition(),buttons:{Ok:{click:function(){$(this).dialog("close"),e&&("function"==typeof e?e():"string"==typeof e&&""!=e&&actionModal(e))},text:"OK",class:"mura-primary"}}};return a&&(s.width=a),$("#alertDialog").attr("title",n),$("#alertDialogMessage").html(t),$("#alertDialog").dialog(s),!1},confirmDialog=function(t,e,n,a,o,r,s,c){if(o=o||450,"object"==i(t)){var l=t;t=l.message||"Message not defined",l.yesAction&&(e=l.yesAction),l.noAction&&(n=l.noAction),a=l.title||"Alert",o=l.width||0}a=a||"Alert",r=r||"OK",s=s||"Cancel";var d={dialogClass:c=c||"dialog-confirm",resizable:!1,modal:!0,position:getDialogPosition(),buttons:{No:{click:function(){void 0!==n&&""!=n?"function"==typeof n?n():actionModal(n):$(this).dialog("destroy")},text:s,class:"mura-cancel"},Yes:{click:function(){$(this).dialog("close"),"function"==typeof e?e():""!=e&&actionModal(e)},text:r,class:"mura-primary"}},close:function(t,e){$(this).dialog("destroy")}};return o&&(d.width=o),$("#alertDialog").attr("title",a),$("#alertDialogMessage").html(t),$("#alertDialog").dialog(d),!1},a=window.jQuery,o=function(t,e){var n=this.$element=a(t),i=this.options=a.extend({},a.fn.fileselector.defaults,e);a(this.$element).attr("data-name")&&(this.options.file=this.$element.attr("data-name"));var o=function(t){n.find(".mura-file-option").find("input").val(""),n.find(".mura-file-option").find(".btn:not('.btn-file')").hide(),n.find(".mura-file-option").hide(),n.find(".mura-file-"+t.toLowerCase()).show(),n.find(".mura-file-option").find("input").attr("name",""),n.find(".mura-file-"+t.toLowerCase()).find("input").attr("name",i.file)};a(this.$element).find("button.mura-file-type-selector").click((function(){o(a(this).val()),"existing"==a(this).val().toLowerCase()?function t(e,i){var o="muraAction=cArch.assocfiles&compactDisplay=true&siteid="+n.attr("data-siteid")+"&fileid="+n.attr("data-fileid")+"&type="+n.attr("data-filetype")+"&contentid="+n.attr("data-contentid")+"&name="+n.attr("data-name")+"&property="+n.attr("data-property")+"&keywords="+e+"&categoryid="+i+"&cacheid="+Math.random();n.find(".mura-file-existing").html('<div class="load-inline"></div>'),n.find(".load-inline").spin(spinnerArgs2),a.ajax("./?"+o).done((function(e){n.find(".load-inline").spin(!1),n.find(".mura-file-existing").html(e);var i=n.find(".mura-file-existing").find(".filesearch").val();n.find(".mura-file-existing").find(".filesearch").focus().val("").val(i),n.find(".mura-file-existing").find(".filesearch").keypress((function(t){if(13==t.which){n.find(".mura-file-existing").find(".filesearch");var e=n.find(".mura-file-existing").find(".filesearch + .btn");return a(e).trigger("click"),!1}})),n.find(".mura-file-existing").find(".btn").click((function(){var e=n.find(".mura-file-existing").find(".filesearch").val(),i=n.find('input[name="categoryID"]:checked').map((function(){return this.value})).get().join(",");t(e,i)})),setTabs("#selectAssocImageResults-"+n.attr("data-property"),0)})).fail((function(t){n.find(".load-inline").spin(!1),n.find(".mura-file-existing").html(t.responseText)}))}("",""):(n.find(".mura-file-existing").html('<div class="load-inline"></div>'),n.find(".load-inline").spin(spinnerArgs2)),a(this).hasClass("btn")&&(a(this).addClass("focus").addClass("onstate").addClass("active"),a(this).siblings(".btn").removeClass("focus").removeClass("active").removeClass("onstate"))})),n.find(".mura-file-option").find("input").change((function(){/^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))+(.jpg|.jpeg|.png|.gif|.svg|.webp)$/.test(a(this).val().toLowerCase())||/(http(s?):)|([/|.|\w|\s])*\.(?:jpg|jpeg|gif|png|svg|webp)/.test(a(this).val().toLowerCase())?a(this).parent().find(".file-meta-open").show():a(this).parent().find(".file-meta-open").hide()})),o("Upload")},a.fn.fileselector=function(t){return this.each((function(){var e=a(this),n=e.data("fileselector");n||e.data("fileselector",n=new o(this,t))}))},a.fn.fileselector.defaults={file:"newfile"},a.fn.fileselector.Constructor=o,start=new Date,start=Date.parse(start)/1e3,sessionTimeout=10800,CountDown=function(){var t=new Date;t=Date.parse(t)/1e3;var e=parseInt(sessionTimeout-(t-start),10),n=Math.floor(e/3600),i=Math.floor((e-3600*n)/60),a=e-(3600*n+60*i);i=i<=9?"0"+i:i,a=a<=9?"0"+a:a,null!=document.getElementById("clock").innerHTML&&(document.getElementById("clock").innerHTML=n+":"+i+":"+a),0<e?timerID=setTimeout("CountDown()",100):null!=document.getElementById("clock").innerHTML&&(document.getElementById("clock").innerHTML="0:0:0")},fileManagerPopUp=function(){},fileManagerCreate=function(){},loadjscssfile=function(t,e){if("js"==e)(n=document.createElement("script")).setAttribute("type","text/javascript"),n.setAttribute("src",t);else if("css"==e){var n;(n=document.createElement("link")).setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t)}void 0!==n&&document.getElementsByTagName("head")[0].appendChild(n)},getDialogPosition=function(){return{my:"center",at:"center",of:window,collision:"fit"}},preloadimages=function(t){for(var e=[],n=(t="object"!=i(t)?[t]:t,0);n<t.length;n++)e[n]=new Image,e[n].src=t[n]},spinnerArgs={lines:17,length:7,width:4,radius:13,corners:1,rotate:0,color:"#696969",speed:.9,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto",forceTop:!0},spinnerArgs2={lines:17,length:7,width:4,radius:13,corners:1,rotate:0,color:"#696969",speed:.9,trail:60,shadow:!1,hwaccel:!1,className:"spinner-alt",zIndex:2e9,top:"auto",left:"auto",position:"relative",forceTop:!1},spinnerArgs3={lines:17,length:7,width:4,radius:13,corners:1,rotate:0,color:"#696969",speed:.9,trail:60,shadow:!1,hwaccel:!1,className:"spinner-alt",zIndex:2e9,top:"auto",left:"auto",position:"relative",forceTop:!1},window.spinnerArgs=spinnerArgs,window.spinnerArgs2=spinnerArgs2,window.spinnerArgs3=spinnerArgs3,removePunctuation=function(t){$(t).val($(t).val().replace(/[^\w\s-]|/g,"").replace(/\s+/g,""))},setLowerCaseKeys=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){for(var e=Object.keys(t),n=e.length;n--;){var a=e[n];a!==a.toLowerCase()&&(t[a.toLowerCase()]=t[a],delete t[a]),"object"==i(t[a.toLowerCase()])&&setLowerCaseKeys(t[a.toLowerCase()])}return t})),setFinders=function(t,e){var n=r.getQueryStringParams(),i=n.muraAction||n.muraaction||"";(i=i.toLowerCase())&&"carch.frontendconfigurator"==i?r(t).click((function(){var t=r(this);siteManager.openDisplayObjectModal("filebrowser/modal.cfm",{target:t.data("target"),completepath:t.data("completepath"),index:t.data("index")})})):$(t).unbind("click").on("click",(function(){var t=r(this),n=parseInt(r("#mura-content").width())-120;$("#alertDialogMessage").html('<div id="MuraFileBrowserContainer"></div>'),$("#alertDialog").attr("title","Select File"),$("#alertDialog").dialog({resizable:!1,width:n,minWidth:712,open:function(n,i){var a=this;MuraFileBrowser.config.height=600,MuraFileBrowser.config.selectMode=2,MuraFileBrowser.config.resourcepath=t.data("resourcepath")||"Application_Root",void 0!==e&&r.extend(MuraFileBrowser.config,e),MuraFileBrowser.config.selectCallback=function(e){var n=$('input[name="'+t.data("target")+'"]'),i=t.attr("data-serverpath");if(i&&"true"==i.toLowerCase())if(e.url.indexOf(rootpath)>-1){var o=e.url.indexOf(webroot);o>-1?n.val(e.url.substring(o,e.url.length)):n.val(webroot+e.url.substring(rootpath.length,e.url.length))}else n.val(webroot+e.url);else{var r=e.url;"string"==typeof r&&r&&(r=r.indexOf("?")>-1?r+"&cacheid="+Math.random():r+"?cacheid="+Math.random()),n.val(r)}console.log(e),n.trigger("change"),$(a).dialog("close")},MuraFileBrowser.render()},modal:!0,position:{my:"center",at:"top",of:"#mura-content",collision:"fit"},buttons:{}})}))},wireupExterndalUIWidgets=function(){setFinders(".mura-ckfinder, .mura-finder"),"undefined"!=typeof dtLocale&&setDatePickers(".datepicker, .mura-datepicker",dtLocale),"undefined"!=typeof activetab&&setTabs(".mura-tabs",activetab),setHTMLEditors(),setMarkdownEditors(),"undefined"!=typeof activepanel&&setAccordions(".accordion",activepanel),setCheckboxTrees(),setColorPickers(".mura-colorpicker"),setToolTips(".container"),setFileSelectors(),setCodeEditors()},showTableControls=function(t){var e=$(t).next(".actions-menu");$("td.actions div.actions-menu").not(".hide").addClass("hide"),$(e).removeClass("hide")},void 0!==$.ui&&($.widget("custom.muraSiteSelector",$.ui.autocomplete,{_suggest:function(t){var e=this.element.closest("ul");e.children("li").remove(),this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),this.options.autoFocus&&this.menu.next()},_renderItem:function(t,e){return $("<li>").append($("<a>").attr("href","?muraAction=cDashboard.main&siteID="+e.id).append($("<i>").addClass("mi-globe")).append(e.label)).appendTo(t)},options:{create:function(t){$(t.target).keyup((function(t,e){var n=$(this);n.val().length<$(this).data("customMuraSiteSelector").option("minLength")&&n.closest("ul").children("li").remove()}))}}}),$((function(){$('input[name="site-search"]').muraSiteSelector({source:function(t,e){$.ajax({url:"./index.cfm?muraAction=cnav.searchsitedata",dataType:"json",method:"POST",data:{searchString:t.term},success:function(t){return e(t)}})},minLength:2})}))),$((function(){wireupExterndalUIWidgets()}))},function(t,e){dashboardManager={loadUserActivity:function(t){var e="muraAction=cDashboard.loadUserActivity&siteID="+t+"&cacheid="+Math.random(),n=$("#userActivityData");return n.html('<div class="load-inline"></div>'),$("#userActivityData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#userActivityData .load-inline").spin(!1),document.getElementById("userActivityData").innerHTML=t,n.animate({opacity:"hide"},1e3,null,(function(){n.animate({opacity:"show"},1e3)}))})),!1},loadPopularContent:function(t){var e="muraAction=cDashboard.loadPopularContent&siteID="+t+"&cacheid="+Math.random(),n=$("#popularContentData");return n.html('<div class="load-inline"></div>'),$("#popularContentData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#popularContentData .load-inline").spin(!1),document.getElementById("popularContentData").innerHTML=t,n.animate({opacity:"hide"},1e3,null,(function(){n.animate({opacity:"show"},1e3)}))})),!1},loadRecentComments:function(t){var e="muraAction=cDashboard.loadRecentComments&siteID="+t+"&cacheid="+Math.random(),n=$("#recentCommentsData");return n.html('<div class="load-inline"></div>'),$("#recentCommentsData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#recentCommentsData .load-inline").spin(!1),document.getElementById("recentCommentsData").innerHTML=t,n.animate({opacity:"hide"},1e3,null,(function(){n.animate({opacity:"show"},1e3)}))})),!1},loadFormActivity:function(t){var e="muraAction=cDashboard.loadFormActivity&siteID="+t+"&cacheid="+Math.random(),n=$("#recentFormActivityData");return n.html('<div class="load-inline"></div>'),$("#recentFormActivityData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#recentFormActivityData .load-inline").spin(!1),document.getElementById("recentFormActivityData").innerHTML=t,n.animate({opacity:"hide"},1e3,null,(function(){n.animate({opacity:"show"},1e3)}))})),!1},loadEmailActivity:function(t){var e="muraAction=cDashboard.loadEmailActivity&siteID="+t+"&cacheid="+Math.random(),n=$("#emailBroadcastsData");return n.html('<div class="load-inline"></div>'),$("#emailBroadcastsData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#emailBroadcastsData .load-inline").spin(!1),document.getElementById("emailBroadcastsData").innerHTML=t,n.animate({opacity:"hide"},1e3,null,(function(){n.animate({opacity:"show"},1e3)}))})),!1}}},function(t,e){},function(t,e){extendManager={showSaveSort:function(t){$("#showSort").hide(),$("#saveSort").show(),$(".handle").each((function(t){$(this).show()})),this.setSortable(t)},showSort:function(t){$("#showSort").show(),$("#saveSort").hide(),$(".handle").each((function(t){$(this).hide()})),$("#"+t).sortable("destroy"),$("#"+t).enableSelection()},showRelatedSaveSort:function(t){$("#showRelatedSort").hide(),$("#saveRelatedSort").show(),$(".handleRelated").each((function(t){$(this).show()})),this.setSortable(t)},showRelatedSort:function(t){$("#showRelatedSort").show(),$("#saveRelatedSort").hide(),$(".handleRelated").each((function(t){$(this).hide()})),$("#"+t).sortable("destroy"),$("#"+t).enableSelection()},saveAttributeSort:function(t){var e=new Array;$("#"+t+" > li").each((function(t){e.push($(this).attr("attributeID"))}));var n="muraAction=cExtend.saveAttributeSort&attributeID="+e.toString()+"&cacheID="+Math.random();$.get("index.cfm?"+n),this.showSort(t)},saveExtendSetSort:function(t){var e=new Array;$("#"+t+" > li").each((function(t){e.push($(this).attr("extendSetID"))}));var n="muraAction=cExtend.saveExtendSetSort&extendSetID="+e.toString()+"&cacheID="+Math.random();$.get("index.cfm?"+n),this.showSort(t)},saveRelatedSetSort:function(t){var e=new Array;$("#"+t+" > li").each((function(t){e.push($(this).attr("relatedContentSetID"))}));var n="muraAction=cExtend.saveRelatedSetSort&relatedContentSetID="+e.toString()+"&cacheID="+Math.random();$.get("index.cfm?"+n),this.showRelatedSort(t)},setSortable:function(t){$("#"+t).sortable(),$("#"+t).disableSelection()},setBaseInfo:function(t){var e=t.split("^");document.subTypeFrm.type.value=e[0],e.length>1&&(document.subTypeFrm.baseTable.value=e[1],document.subTypeFrm.baseKeyField.value=e[2],document.subTypeFrm.dataTable.value=e[3]),""==e[0]?($(".hasRow1Container").hide(),$(".subTypeContainer").hide(),$(".SubTypeIconSelect").hide(),$(".hasSummaryContainer").hide(),$(".hasBodyContainer").hide(),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").hide(),$(".hasAssocFileContainer").hide(),$(".adminOnlyContainer").hide()):"Site"==e[0]?($(".hasRow1Container").hide(),$(".subTypeContainer").hide(),$(".SubTypeIconSelect").hide(),$(".hasSummaryContainer").hide(),$(".hasBodyContainer").hide(),$(".hasConfiguratorContainer").hide(),$(".hasAssocFileContainer").hide(),$(".adminOnlyContainer").hide(),$("#subType").val("Default")):"1"==e[0]||"2"==e[0]||"Address"==e[0]||"Custom"==e[0]||"Base"==e[0]?($(".hasRow1Container").hide(),$(".subTypeContainer").show(),$(".SubTypeIconSelect").hide(),$(".hasSummaryContainer").hide(),$(".hasBodyContainer").hide(),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").hide(),$(".hasAssocFileContainer").hide(),$(".adminOnlyContainer").hide()):"File"==e[0]||"Link"==e[0]?($(".hasRow1Container").show(),$(".subTypeContainer").show(),$(".SubTypeIconSelect").show(),$(".hasSummaryContainer").show(),$(".hasBodyContainer").hide(),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").show(),"File"==e[0]?$(".hasAssocFileContainer").hide():$(".hasAssocFileContainer").show(),$(".adminOnlyContainer").show()):"Folder"==e[0]||"Gallery"==e[0]||"Calendar"==e[0]?($(".hasRow1Container").show(),$(".subTypeContainer").show(),$(".SubTypeIconSelect").show(),$(".hasSummaryContainer").show(),$(".hasBodyContainer").show(),"1"===$("input[name='isnew']").val()&&$("#hasConfiguratorYes").prop("checked",!0),$(".hasConfiguratorContainer").show(),$(".availableSubTypesContainer").show(),$(".hasAssocFileContainer").show(),$(".adminOnlyContainer").show()):"Form"==e[0]||"Component"==e[0]||"Variation"==e[0]?($(".subTypeContainer").show(),$(".SubTypeIconSelect").show(),"Variation"==e[0]?($(".hasRow1Container").hide(),$(".hasAssocFileContainer").hide(),$(".hasBodyContainer").hide()):($(".hasRow1Container").show(),$(".hasBodyContainer").show(),$(".hasAssocFileContainer").hide()),$(".hasSummaryContainer").hide(),"1"===$("input[name='isnew']").val()&&$("#hasConfiguratorYes").prop("checked",!0),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").show(),$(".adminOnlyContainer").show()):($(".hasRow1Container").show(),$(".subTypeContainer").show(),$(".SubTypeIconSelect").show(),$(".hasSummaryContainer").show(),$(".hasBodyContainer").show(),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").show(),$(".hasAssocFileContainer").show(),$(".adminOnlyContainer").show())}}},function(t,e){feedManager={loadSiteFilters:function(t,e,n,i){var a="muraAction=cFeed.loadSite&compactDisplay=true&siteid="+t+"&keywords="+e+"&isNew="+n+"&contentPoolID="+i+"&cacheid="+Math.random();$("#selectFilter").html('<div class="load-inline"></div>'),$("#selectFilter .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+a,(function(t){$("#selectFilter").html(t),$("#contentResults").find("tbody > tr").each((function(){var t=$(this).attr("id").replace("add-","del-");$("#contentFilters").find("#"+t).length>0&&$(this).find("li.add").addClass("disabled").find("i").removeClass("mi-plus-circle").addClass("mi-check-circle")}))}))},addContentFilter:function(t,e,n){$(this).parent().addClass("disabled").children().find("i").removeClass("mi-plus-circle").addClass("mi-check-circle");var i=document.getElementById("contentFilters").getElementsByTagName("TBODY")[0],a=document.createElement("TR");a.id="del-"+t;var o=document.createElement("TD");o.className="var-width",$(o).html($("#"+decodeURI(n)).html());var r=document.createElement("TD");$(r).html(decodeURI(e));var s=document.createElement("TD");s.className="actions";var c=document.createElement("A");c.setAttribute("href","javascript:void(0);"),c.setAttribute("title","Delete"),c.onclick=function(){feedManager.removeFilter(t)};var l=document.createElement("I");l.setAttribute("class","mi-trash"),c.appendChild(l);var d=document.createElement("UL");d.className="clearfix";var u=document.createElement("LI");u.className="delete",u.appendChild(c),d.appendChild(u);var m=document.createElement("INPUT");m.setAttribute("type","hidden"),m.setAttribute("name","contentID"),m.setAttribute("value",t),s.appendChild(m),s.appendChild(d),a.appendChild(s),a.appendChild(o),a.appendChild(r),i.appendChild(a),$("#noFilters").length&&$("#noFilters").hide(),stripe("stripe")},removeFilter:function(t){return $("#del-"+t).remove(),$("#add-"+t).find("li.add").removeClass("disabled").find("i").removeClass("mi-check-circle").addClass("mi-plus-circle"),stripe("stripe"),!1},loadSiteParents:function(t,e,n,i){var a="muraAction=cFeed.siteParents&compactDisplay=true&siteid="+t+"&parentid="+e+"&keywords="+n+"&isNew="+i+"&cacheid="+Math.random();$("#move").html('<div class="load-inline"><inut type=hidden name=parentid value='+e+" ></div>"),$("#move .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+a,(function(t){$("#move").html(t)}))},confirmImport:function(){return $("#alertDialogMessage").html("Import Selections?"),$("#alertDialog").dialog({resizable:!1,modal:!0,buttons:{Yes:function(){$(this).dialog("close"),submitForm(document.forms.contentForm,"Import")},No:function(){$(this).dialog("close")}}}),!1},setDisplayListSort:function(){$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$.trim($(this).html())):$("#displayList").val($.trim($(this).html()))}))}}).disableSelection()},updateInstanceObject:function(){var t={};$("#tabDisplay").find(":input").each((function(){var e=$(this);("radio"!=e.attr("type")||"radio"==e.attr("type")&&e.is(":checked"))&&(t[e.attr("data-displayobjectparam")]=e.val())})),$("#instanceParams").val(JSON.stringify(t))}}},function(t,e){dataManager={addObject:function(t,e,n){if(null==document.getElementById(t)||-1==document.getElementById(t).selectedIndex)return alert("Please select a field."),!1;var i=document.getElementById(e),a=document.getElementById(t).selectedIndex;if(!(a<0)){var o=document.getElementById(t).options[a];if(i.options.length)for(var r=0;r<i.options.length;r++)if(i.options[r].value==o.value)return void(i.selectedIndex=r);var s=document.createElement("option");document.getElementById(e).appendChild(s),s.text=o.text,s.value=o.value,s.selected="selected",this.updateList(e,n)}},deleteObject:function(t,e){var n=document.getElementById(t),i=n.selectedIndex;n.options.length>1&&n.options.length;i<0||(n.options[i]=null,this.updateList(t,e),n.options.length&&(n.options[n.options.length-1].selected=!0))},updateList:function(t,e){var n=document.getElementById(t),i=document.getElementById(e);i.value="";for(var a=0;a<n.options.length;a++)""!=i.value?i.value+="^"+n.options[a].value:i.value=n.options[a].value},moveUp:function(t,e){var n=document.getElementById(t),i=n.selectedIndex;if(!(i<1)){var a=document.createElement("option"),o=document.createElement("option");a.text=n.options[i].text,a.value=n.value,a.selected="selected",o.text=n.options[i-1].text,o.value=n.options[i-1].value,n[i-1]=a,n[i]=o,this.updateList(t,e)}},moveDown:function(t,e){var n=document.getElementById(t),i=n.selectedIndex;if(i!=n.length-1){var a=document.createElement("option"),o=document.createElement("option");a.text=n.options[i].text,a.value=n.options[i].value,a.selected="selected",o.text=n.options[i+1].text,o.value=n.options[i+1].value,n.options[i+1]=a,n.options[i]=o,this.updateList(t,e)}}}},function(t,e){$searchParams={addSearchParam:function(){var t=$("#searchParams > .mura-control").length,e='<div class="mura-control justify">'+$("#searchParams > .mura-control").html()+"</div>";$("#searchParams").append(e);var n=$("#searchParams > .mura-control:last"),i=$("#searchParams > .mura-control:last > select"),a=$("#searchParams > .mura-control:last > input");i[0].selectedIndex=0,i[1].selectedIndex=0,i[2].selectedIndex=0,a[1].setAttribute("value",""),this.setSearchParamNames(n,t+1)},setSearchParamNames:function(t,e){var n=$(t).find("select"),i=$(t).find("input");n[0].setAttribute("name","paramRelationship"+e),n[1].setAttribute("name","paramField"+e),n[2].setAttribute("name","paramCondition"+e),i[0].setAttribute("value",e),i[1].setAttribute("name","paramCriteria"+e)},setSearchButtons:function(){var t=$("#searchParams > .mura-control"),e=t.length;if(1==e){var n=t.find("a");$(n[0]).hide(),$(n[1]).show(),t.find("select:first").hide()}else self=this,t.each((function(n){if(0==n){var i=$(t[n]).find("a");$(t[n]).find("select:first").hide(),$(i[0]).hide(),$(i[1]).hide()}else{i=$(t[n]).find("a");$(t[n]).find("select:first").show(),n!=e-1?($(i[0]).show(),$(i[1]).hide()):($(i[0]).show(),$(i[1]).show()),self.setSearchParamNames(t[n],n+1)}}));return!1},removeSeachParam:function(t){return new $(t).remove(),!1}}},function(module,exports){function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}userManager={submitDialogs:[],submitActions:[],addSubmitDialog:function(t){userManager.submitDialogs.push(t)},addSubmitAction:function(t){userManager.submitActions.push(t)},submitForm:function(t,e){var n=0,i=userManager.submitDialogs,a=userManager.submitActions;return e&&(t.action.value=e),validateForm(t)&&function e(){if("undefined"!=typeof CKEDITOR)for(r in CKEDITOR.instances)CKEDITOR.instances[r].updateElement();for(Mura("textarea.mura-markdown,textarea.markdownEditor").forEach((function(){var t=Mura(this);markdownInstances&&_typeof(markdownInstances[t.attr("name")])&&t.length&&t.val(markdownInstances[t.attr("name")].getMarkdown())})),r=0;r<i.length;r++)if(r==n){var o=i[r];if("confirmation"==o.type.toLowerCase()){if("function"!=typeof o.condition)return confirmDialog($.extend(o,{yesAction:function(){n++,e()}})),!1;if(o.condition(o))return confirmDialog($.extend(o,{yesAction:function(){n++,e()}})),!1;n++}else if("alert"==o.type.toLowerCase()){if("function"!=typeof o.condition)return alertDialog($.extend(o,{okAction:function(){n++,e()}})),!1;if(o.condition(o))return alertDialog($.extend(o,{okAction:function(){n++,e()}})),!1;n++}else if("validation"==o.type.toLowerCase())if("function"==typeof o.condition){if(o.condition(o))return alertDialog($.extend(o,{okAction:function(){n++}})),!1;n++}else n++;else n++}if(n==i.length){for(var r=0;r<a.length;r++)a[r]();actionModal((function(){t.submit()}))}}(),!1},loadExtendedAttributes:function(t,e,n,i,a,o){var r="muraAction=cUsers.loadExtendedAttributes&baseID="+t+"&type="+e+"&subType="+n+"&siteID="+i+"&cacheid="+Math.random();siteID=i,context=a,themeAssetPath=o;var s=$("#extendSetsDefault");return s.length&&(s.html('<div class="load-inline"></div>'),$.ajax({url:"index.cfm?"+r,dataType:"text",success:function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),userManager.setExtendedAttributes(t)}})),!1},setExtendedAttributes:function setExtendedAttributes(data){var r=eval("("+data+")");$("#extendSetsDefault").html(r.extended),$("#extendSetsBasic").html(r.basic),""==Mura.trim(r.extended)?$("#tabExtendedattributesLI,#tabExtendedattributes").addClass("hide"):$("#tabExtendedattributesLI,#tabExtendedattributes").removeClass("hide"),setHTMLEditors(),setDatePickers(".tab-content .datepicker",dtLocale),setColorPickers(".tab-content .mura-colorpicker"),setFinders(".tab-content .mura-ckfinder,.tab-content .mura-finder"),setToolTips(".tab-content"),setFileSelectors()},checkExtendSetTargeting:function(){var t=$(".extendset"),e=!1,n=!1,i=!0;if(t.length){for(var a=0;a<t.length;a++){var o=t[a];if(null!=o.getAttribute("categoryid")&&""!=o.getAttribute("categoryid")){if(!n){var r=document.form1.categoryID;n=!0}for(var s=0;s<r.length;s++){var c=r[s],l=r[s].value,d=o.getAttribute("categoryid");!e&&null!=l&&d.indexOf(l)>-1&&(e=!0,membership=c.checked)}e&&membership?(userManager.setFormElementsDisplay(o,""),o.style.display="",i=!1):(userManager.setFormElementsDisplay(o,"none"),o.style.display="none")}else userManager.setFormElementsDisplay(o,""),o.style.display="",i=!1;e=!1}i?($("#extendMessage").show(),$("#extendDL").hide()):($("#extendMessage").hide(),$("#extendDL").show())}},resetExtendedAttributes:function(t,e,n,i,a,o){this.loadExtendedAttributes(t,e,n,i,a,o)},setFormElementsDisplay:function(t,e){var n=t.getElementsByTagName("input");if(n.length)for(var i=0;i<n.length;i++)n[i].style.display=e;if((n=t.getElementsByTagName("textarea")).length)for(i=0;i<n.length;i++)n[i].style.display=e;if((n=t.getElementsByTagName("select")).length)for(i=0;i<n.length;i++)n[i].style.display=e}}}]);